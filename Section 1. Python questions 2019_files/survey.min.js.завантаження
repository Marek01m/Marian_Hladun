!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s="vSUH")}({0:function(){},"5D9O":function(e,t,n){e.exports=n("wVGV")()},"9yYZ":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(e,t,n){void 0!==module&&module.exports?module.exports=n():(__WEBPACK_AMD_DEFINE_FACTORY__=n,void 0!==(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(0,0,function(){function succeed(e){var t=protocolRe.exec(e.url);return t=t&&t[1]||context.location.protocol,httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,n){return function(){return e._aborted?n(e.request):e._timedOut?n(e.request,"Request is aborted: timeout"):void(e.request&&4==e.request[readyState]&&(e.request.onreadystatechange=noop,succeed(e)?t(e.request):n(e.request)))}}function setHeaders(e,t){var n,r=t.headers||{};r.Accept=r.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"];var o="undefined"!=typeof FormData&&t.data instanceof FormData;t.crossOrigin||r[requestedWith]||(r[requestedWith]=defaultHeaders.requestedWith),r[contentType]||o||(r[contentType]=t.contentType||defaultHeaders.contentType);for(n in r)r.hasOwnProperty(n)&&"setRequestHeader"in e&&e.setRequestHeader(n,r[n])}function setCredentials(e,t){void 0!==t.withCredentials&&void 0!==e.withCredentials&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,n,r){var o=uniqid++,i=e.jsonpCallback||"callback",a=e.jsonpCallbackName||reqwest.getcallbackPrefix(o),s=new RegExp("((^|\\?|&)"+i+")=([^&]+)"),c=r.match(s),l=doc.createElement("script"),p=0,u=-1!==navigator.userAgent.indexOf("MSIE 10.0");return c?"?"===c[3]?r=r.replace(s,"$1="+a):a=c[3]:r=urlappend(r,i+"="+a),context[a]=generalCallback,l.type="text/javascript",l.src=r,l.async=!0,void 0===l.onreadystatechange||u||(l.htmlFor=l.id="_reqwest_"+o),l.onload=l.onreadystatechange=function(){if(l[readyState]&&"complete"!==l[readyState]&&"loaded"!==l[readyState]||p)return!1;l.onload=l.onreadystatechange=null,l.onclick&&l.onclick(),t(lastValue),lastValue=void 0,head.removeChild(l),p=1},head.appendChild(l),{abort:function(){l.onload=l.onreadystatechange=null,n({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(l),p=1}}}function getRequest(e,t){var n,r=this.o,o=(r.method||"GET").toUpperCase(),i="string"==typeof r?r:r.url,a=!1!==r.processData&&r.data&&"string"!=typeof r.data?reqwest.toQueryString(r.data):r.data||null,s=!1;return"jsonp"!=r.type&&"GET"!=o||!a||(i=urlappend(i,a),a=null),"jsonp"==r.type?handleJsonp(r,e,t,i):(n=r.xhr&&r.xhr(r)||xhr(r),n.open(o,i,!1!==r.async),setHeaders(n,r),setCredentials(n,r),context[xDomainRequest]&&n instanceof context[xDomainRequest]?(n.onload=e,n.onerror=t,n.onprogress=function(){},s=!0):n.onreadystatechange=handleReadyState(this,e,t),r.before&&r.before(n),s?setTimeout(function(){n.send(a)},200):n.send(a),n)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){if(null!==e)return e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}function init(o,fn){function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=context.JSON?context.JSON.parse(r):eval("("+r+")")}catch(e){return error(resp,"Could not parse JSON in response",e)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(e,t,n){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=n,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,n);complete(e)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var n,r,o,i,a=e.name,s=e.tagName.toLowerCase(),c=function(e){e&&!e.disabled&&t(a,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))};if(!e.disabled&&a)switch(s){case"input":/reset|button|image|file/i.test(e.type)||(n=/checkbox/i.test(e.type),r=/radio/i.test(e.type),o=e.value,(!(n||r)||e.checked)&&t(a,normalize(n&&""===o?"on":o)));break;case"textarea":t(a,normalize(e.value));break;case"select":if("select-one"===e.type.toLowerCase())c(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(i=0;e.length&&i<e.length;i++)e.options[i].selected&&c(e.options[i])}}function eachFormElement(){var e,t,n=this;for(t=0;t<arguments.length;t++)e=arguments[t],/input|select|textarea/i.test(e.tagName)&&serial(e,n),function(e,t){var r,o,i;for(r=0;r<t.length;r++)for(i=e[byTag](t[r]),o=0;o<i.length;o++)serial(i[o],n)}(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,n){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(n)):e[t]=n},arguments),e}function buildParams(e,t,n,r){var o,i,a,s=/\[\]$/;if(isArray(t))for(i=0;t&&i<t.length;i++)a=t[i],n||s.test(e)?r(e,a):buildParams(e+"["+("object"==typeof a?i:"")+"]",a,n,r);else if(t&&"[object Object]"===t.toString())for(o in t)buildParams(e+"["+o+"]",t[o],n,r);else r(e,t)}var context=this;if("window"in context)var doc=document,byTag="getElementsByTagName",head=doc[byTag]("head")[0];else{var XHR2;try{XHR2=__webpack_require__(0)}catch(e){throw new Error("Peer dependency `xhr2` required! Please npm install xhr2")}}var httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(!0===e.crossOrigin){var t=context[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(context[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return context[xmlHttpRequest]?new XMLHttpRequest:XHR2?new XHR2:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},catch:function(e){return this.fail(e)}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,n){e.push({name:t,value:n})},arguments),e},reqwest.serialize=function(){if(0===arguments.length)return"";var e,t,n=Array.prototype.slice.call(arguments,0);return e=n.pop(),e&&e.nodeType&&n.push(e)&&(e=null),e&&(e=e.type),t="map"==e?serializeHash:"array"==e?reqwest.serializeArray:serializeQueryString,t.apply(null,n)},reqwest.toQueryString=function(e,t){var n,r,o=t||!1,i=[],a=encodeURIComponent,s=function(e,t){t="function"==typeof t?t():null==t?"":t,i[i.length]=a(e)+"="+a(t)};if(isArray(e))for(r=0;e&&r<e.length;r++)s(e[r].name,e[r].value);else for(n in e)e.hasOwnProperty(n)&&buildParams(n,e[n],o,s);return i.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest})},Asjh:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},DUkt:function(){"use strict"},JkW7:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e){return ge()({url:e,method:"get",crossOrigin:!0}).then(function(e){return e})}function i(e,t,n,r){return r&&_e[e]?new Promise(function(e){return e({})}):(_e[e]=!0,ge()(ve({url:e,method:"post",crossOrigin:!0,headers:{"Content-Type":"application/"+(n?"json":"x-www-form-urlencoded; charset=UTF-8")}},n&&{type:"json"},{data:t})).then(function(t){return delete _e[e],t}))}function a(e){var t=e.mode,n=e.token,o=e.surveyId,i=e.domain,a=e.feedback;r(e,["mode","token","surveyId","domain","feedback"]);return{survey:!1,followup:"upsert"===t,token:n,surveyid:o,domain:i,data:a.map(function(e){return{label:e.label?String(e.label).replace('"',""):"",value:"dom"!==e.type&&"selector"!==e.type?Object(de.y)(e.value):e.value,type:e.type}})}}function s(e){function t(e,t){return"send"===e?c.send:t||["beta.mopinion.com","accept.mopinion.com"].indexOf(r)>-1?c.domain:c[e]}var n=e.formKey,r=e.domain,s=e.webView,c={cache:"https://cacheorcheck.mopinion.com/survey/public",domain:"https://"+r+"/survey/public",send:"https://survey.mopinion.com/api/1/data"};return{getConfig:function(e,i){return o(t("cache",i)+"/json-config?key="+n+"&domain="+r+(s?"&webView=true":"")+(e?"&withBase=true":""))},getEmoji:function(e){return i(t("cache")+"/emoji",{blockId:e,domain:r})},getIcons:function(e){return e=Object(de.o)(e)?e:[e],i(t("cache")+"/icons",{icons:e,domain:r})},postFeedback:function(e){return i(t("send"),JSON.stringify(a(e)),!0,!0)},notifyUser:function(e){return i(t("domain")+"/notify-user",e)},validateReCaptcha:function(e){return i(t("domain")+"/validate-recaptcha",e)}}}function c(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function v(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function j(e){return"string"!=typeof e?e:1===e.split("<br/>").length?e:e.split("<br/>").map(function(e){return Object(ue.h)("span",null,e,Re)})}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=t.genID,r=t.show_as_panels,o=function(){return r?"inline-block":"block"},i=Object(de.c)(e,function(e){return e.field==="thanks-page_"+n});if(-1!==i){return e[i].isVisible?o():"none"}return o()}function N(e,t,n){if("checkbox"!==n.typeName)return e.value===t.valueLabel;if(t.hasOwnProperty("linkedLabel")){return e.validateExtraFields.filter(function(n){var r=e[n];if(r.hasOwnProperty("linkedField")){var o=e[r.linkedField];return t.linkedLabel===r.valueLabel&&o.value&&"false"!==o.value}}).length>0}}function E(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function q(e,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];setTimeout(function(){var e=document.querySelector("html").lang||"en";t.querySelector("html").setAttribute("lang",e),n.filter(function(e){return"outer"!==e.scope}).forEach(function(e){return Object(de.b)(e.url,{doc:t})}),o||Object(de.p)(r,t)})}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function H(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function z(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function X(e,t){if(t)return{type:t,position:"slide"==t?"bottom-right":"modal"==t?"right":""};var n=e.trigger;return n.hasOwnProperty("slider")&&n.slider.hasOwnProperty("type")&&e.modal?{type:"slide",position:n.slider.position}:e.modal?{type:"modal",position:n.button.position}:{type:"embed"}}function J(e){var t=e.children,n=e.useDiv,r=z(e,["children","useDiv"]);return n?Object(ue.h)(G,r,t):Object(ue.h)(At,r,t)}function G(e){var t=e.children,n=e.style,r=e.width,o=e.height,i=z(e,["children","style","width","height"]),a={id:"surveyWindow",class:"surveyWindow "+(i.class?i.class:""),style:{width:r||"100%",height:o||0,border:"none",borderRadius:"2px",background:"rgba(255,255,255,0.01)",transition:"all .2s",overflow:"hidden"},ref:function(e){return i.setRef(e)}};return"object"==typeof n&&Ut(a.style,n),Object(ue.h)("div",a,t)}function Q(){if(Vt){var e;(e=console).log.apply(e,arguments)}}function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ne(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function re(e){try{return JSON.parse(sessionStorage.getItem(e))}catch(e){return null}}function oe(e,t){try{sessionStorage.setItem(e,JSON.stringify(t))}catch(e){}}function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function se(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ce(e,t){return t?Object(de.q)(document.querySelectorAll(e)):document.querySelector(e)}function le(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{return ce(e,t)?ce(e,t):ce("#"+e,t)}catch(e){return null}}function pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];return"string"==typeof e&&e.length&&-1==e.indexOf(",")?le(e,t):"string"==typeof e&&e.indexOf(",")>-1?e.split(",").map(function(e){return le(e)}):ce("#surveyContent:not(.mopinion-survey-content)")}Object.defineProperty(t,"__esModule",{value:!0});var ue=n("KM04"),de=n("fkUE"),fe=n("q6qL"),he=n.n(fe),me=n("9yYZ"),ge=n.n(me),ye=n("zXdP"),be=n.n(ye),ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_e={},Oe=s,we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},je=function(e){function t(){for(var t,n,r,o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=n=l(this,e.call.apply(e,[this].concat(i))),n.state={icon:{}},r=t,l(n,r)}return p(t,e),t.prototype.componentDidMount=function(){var e=this;this.testIcon=this.props.icon.replace("fa-","").replace("fa ",""),be.a[this.testIcon]?this.setState({icon:be.a[this.testIcon]}):Oe({domain:this.context.requestDomain}).getIcons(this.testIcon).then(function(t){var n="string"==typeof t?JSON.parse(t):t;be.a[e.testIcon]=n[e.testIcon],e.setState({icon:n[e.testIcon]})})},t.prototype.render=function(e){var t=this.state.icon,n=void 0===t?{}:t,r=c(e,["className"]),o=we({className:"mopicon mopicon-"+this.testIcon+" "+(e.className||"")},r);return Object(ue.h)("i",o,Object(ue.h)("svg",{viewBox:n.viewBox||"0 0 28 28"},Object(ue.h)("path",{d:n.path||"",fill:"currentColor"})))},t}(ue.Component),ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xe=!1,Se=function(e){function t(){var n,r,o;u(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=d(this,e.call.apply(e,[this].concat(a))),r.onMouseMove=function(e){r.props.showCapture&&r.props.onMouseMove(e)},r.onClick=function(e){r.props.showCapture&&!xe&&r.props.onClick(e)},r.onScroll=function(e){r.props.onScroll(e)},r.onTouchEnd=function(e){xe=!0,r.props.showCapture&&"function"==typeof r.props.onClick&&r.props.onClick(e)},o=n,d(r,o)}return f(t,e),t.prototype.componentDidMount=function(){var e=this;"function"==typeof this.props.onMouseMove&&addEventListener("mousemove",this.onMouseMove),"function"==typeof this.props.onScroll&&addEventListener("scroll",this.onScroll),"function"==typeof this.props.onClick&&setTimeout(function(){addEventListener("mousedown",e.onClick),addEventListener("click",e.onClick)}),addEventListener("touchend",this.onTouchEnd)},t.prototype.componentWillUnmount=function(){removeEventListener("mousemove",this.onMouseMove),removeEventListener("scroll",this.onScroll),removeEventListener("mousedown",this.onClick),removeEventListener("click",this.onClick),removeEventListener("touchstart",this.onTouchEnd)},t.prototype.render=function(e){var t=e.children,n=t[0];return"function"==typeof n?n():n},t}(ue.Component),Ce=Object(ue.h)("div",{class:"dimmer-border"}),Pe=Object(ue.h)(je,{icon:"mouse-pointer"}),Ne=Object(ue.h)(je,{icon:"hand-pointer-o"}),Ee=function(e){function t(n){u(this,t);var r=d(this,e.call(this,n));return r.state={dimTop:{},dimRight:{},dimLeft:{},dimBottom:{},dimHighlight:{},selectedTarget:!1,dom:{},selector:{}},r.screenshotIsRendering="https://mopinion-visual-feedback.s3-eu-west-1.amazonaws.com/camera-icon.png",r}return f(t,e),t.prototype.componentWillReceiveProps=function(e){e.showCapture&&!this.props.showCapture&&this.setState({dimTop:{},dimRight:{},dimLeft:{},dimBottom:{},dimHighlight:{},selectedTarget:!1})},t.prototype.mouseMove=function(e){this.state.selectedTarget||xe||this.setDim(e.target)},t.prototype.anonymizeDOM=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelector("html"),n=t.querySelector("#mopinion_dimmer_overlay");n&&n.parentNode.removeChild(n);var r=["[data-mop-supress]"];this.props.block.properties.hasOwnProperty("maskedSelectors")&&(r=[].concat(r,[this.props.block.properties.maskedSelectors])),Object(de.q)(t.querySelectorAll("input, select, textarea")).forEach(function(e){try{e.value="***"}catch(e){}try{e.checked=!1}catch(e){}try{e.setAttribute("data-mopinion-mask-input","")}catch(e){}}),r.forEach(function(e){try{Object(de.q)(t.querySelectorAll(e)).forEach(function(e){Object(de.q)(e.querySelectorAll(sel)).forEach(function(e){e.setAttribute("data-mopinion-mask-extra","")})})}catch(e){}});var o=t.querySelector("base");if(o){if(o){var i=-1==o.href.indexOf(location.origin)?""+location.origin+("/"===o.href.charAt(0)?o.href:"/"+o.href):o.href;o.href=i}}else{var a=e.createElement("base");a.href=location.origin,Object(de.s)(e.querySelector("head"),a)}return Object(de.e)(t.outerHTML.replace(/(\r\n|\n|\r)/gm," ").trim())},t.prototype.anonymizeSelector=function(e){var t=this.props.block,n=["[data-mop-supress]"];return t.properties.hasOwnProperty("maskedSelectors")&&Object(de.o)(t.properties.maskedSelectors)&&(n=[].concat(n,t.properties.maskedSelectors)),Object(de.q)(e.querySelectorAll("input, select, textarea")).forEach(function(e){try{e.value="***"}catch(e){}try{e.checked=!1}catch(e){}try{e.setAttribute("data-mopinion-mask-input","")}catch(e){}}),n.forEach(function(t){if("string"==typeof t){var n=document.querySelector(t);n&&e.isEqualNode(n)?e.innerHTML="***":Object(de.q)(e.querySelectorAll(t)).forEach(function(e){e.innerHTML="***"})}}),e.outerHTML.replace(/(\r\n|\n|\r)/gm," ").trim()},t.prototype.onClick=function(e){var t=this;if(("embed"!==this.props.formType||!this.state.selectedTarget)&&(e.preventDefault(),e.stopPropagation(),!this.state.selectedTarget&&!this.dimmer.contains(e.target)||xe||this.props.contentDiv.contains(e.selectedTarget))){var n=e.target;if(xe&&!Object(de.n)(e.target,"btn-select-touch"))return this.setDim(e.target,!0);xe&&Object(de.n)(e.target,"btn-select-touch")&&(n=this.state.selectedTarget);try{document.querySelector("[data-mopinion-screen-capture]").removeAttribute("[data-mopinion-screen-capture]")}catch(e){}n.setAttribute("data-mopinion-screen-capture","");var r=this.anonymizeSelector(n.cloneNode(!0)),o=this.anonymizeDOM(document.cloneNode(!0));return this.setState(function(){return{dom:o,selector:r}},function(){t.setDim(n,!0),t.props.updateForm(t.state.dom,"dom_"+t.props.block.id),t.props.updateForm(t.state.selector,"selector_"+t.props.block.id),t.props.updateForm(t.screenshotIsRendering,"screenshot_"+t.props.block.id),t.props.setCapture()})}},t.prototype.onScroll=function(){this.state.selectedTarget&&this.setDim(this.state.selectedTarget,!0)},t.prototype.setDim=function(e,t){var n=this,r=e.getBoundingClientRect(),o={position:"fixed",background:"rgba(0,0,0,.3)",pointerEvents:"none"};this.setState(function(){var i={dimTop:ke({},o,{top:0,height:r.top,left:0,right:0}),dimRight:ke({},o,{top:r.top,height:r.height,width:window.innerWidth-r.right,right:0}),dimBottom:ke({},o,{top:r.bottom,bottom:0,left:0,right:0}),dimLeft:ke({},o,{top:r.top,height:r.height,left:0,width:r.left})};return e&&t?(i.dimHighlight={position:"fixed",top:r.top-3,left:r.left-3,height:r.height+6,width:r.width+6},i.selectedTarget=e):(i.dimHighlight={},i.tempHighlight={position:"fixed",top:r.top-3,left:r.left-3,height:r.height+6,width:r.width+6},"embed"===n.props.formType&&(i.tempHighlight.borderColor="#B6B6B6")),ke({},i)})},t.prototype.render=function(e,t,n){var r=this;return Object(ue.h)("div",null,Object(ue.h)(he.a,{into:"body",ref:function(e){return r.overlayPortal=e}},Object(ue.h)(Se,{onMouseMove:function(e){r.mouseMove(e)},onClick:function(e){r.onClick(e)},onScroll:function(e){r.onScroll(e)},showCapture:e.showCapture},Object(ue.h)("div",{id:"mopinion_dimmer_overlay","data-dimmer-for":n.config.properties.formKey,class:n.themeName+" mopinion-dimmer",ref:function(e){return r.dimmer=e}},Ce,Object(ue.h)("div",{class:"dimmer-actions"},0==Object.keys(t.dimHighlight).length?Object(ue.h)("div",null,Object(ue.h)(je,{key:"mouse",icon:"mouse-pointer",style:{marginRight:"10px"}}),e.text.screenCaptureText):Object(ue.h)("div",null,Object(ue.h)(je,{key:"check",icon:"check",style:{marginRight:"10px"}}),e.text.screenCaptureSelected),Object(ue.h)("div",{class:"dimmer-cancel",onClick:function(){e.removeCapture()}},"×")),Object.keys(t.dimTop).length>0?Object(ue.h)("div",null,"embed"!==e.formType?Object(ue.h)("div",null,Object(ue.h)("div",{style:t.dimTop}),Object(ue.h)("div",{style:t.dimRight}),Object(ue.h)("div",{style:t.dimBottom}),Object(ue.h)("div",{style:t.dimLeft})):null,Object.keys(t.dimHighlight).length?Object(ue.h)("div",{class:"dimmer-highlight dimmer-selected",style:t.dimHighlight,onClick:function(e){e.preventDefault(),e.stopPropagation()}},xe?Object(ue.h)("button",{type:"button",class:"btn-select-touch"},e.text.screenCaptureTouchBtnText):null):Object.keys(t.tempHighlight).length>0?Object(ue.h)("div",{class:"dimmer-highlight",style:t.tempHighlight,onClick:function(e){e.preventDefault(),e.stopPropagation()}}):null):Object(ue.h)("div",null,Object(ue.h)("div",{style:{position:"fixed",top:0,right:0,bottom:0,left:0,background:"rgba(0,0,0,.3)"}}),Object(ue.h)("div",{class:"capture-hint"},xe?Ne:Pe,Object(ue.h)("div",null,e.text.screenCaptureHint)))))))},t}(ue.Component),Te=(n("5D9O"),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Le="undefined"!=typeof window&&window.recaptchaOptions&&window.recaptchaOptions.lang?"&hl="+window.recaptchaOptions.lang:"",Fe="https://www.google.com/recaptcha/api.js?&onload=recaptchaLoaded&render=explicit"+Le,Ie=function(){return"undefined"!=typeof window&&void 0!==window.grecaptcha},Ae=function(e){function t(){m(this,t);var n=g(this,e.call(this));return n.execute=function(){return!(!Ie()||!n.element||null===n.recaptchaId||"invisible"!==n.props.size)&&(grecaptcha.execute(n.recaptchaId),!0)},n.reset=function(){return!(!Ie()||!n.element||null===n.recaptchaId)&&(grecaptcha.reset(n.recaptchaId),!0)},n.getResponse=function(){return Ie()&&n.element&&null!==n.recaptchaId?grecaptcha.getResponse(n.recaptchaId):null},n.handleChange=function(e){n.props.onChange&&n.props.onChange(e)},n.handleExpired=function(){n.props.onExpired&&n.props.onExpired()},n.removeRecaptcha=function(){grecaptcha.reset(n.recaptchaId)},n.renderRecaptcha=function(){n.recaptchaId=grecaptcha.render(n.element,{sitekey:n.props.sitekey,callback:n._handleChange,theme:n.props.theme,type:n.props.type,tabindex:n.props.tabindex,"expired-callback":n._handleExpired,size:n.props.size,stoken:n.props.stoken,badge:n.props.badge})},n.captureRef=function(e){n.element=e},n.initializeRecaptcha=function(){if(Ie())n.clearTimer(),n.renderRecaptcha();else if(n.isRecaptchaJSLibInjected())n.startTimer();else{var e=document.createElement("script");window.recaptchaLoaded=n.initializeRecaptcha.bind(n),e.src=Fe,e.async=1,e.defer=1,e.onerror=function(){console.log("Error loading google recaptcha!")},document.body.appendChild(e)}},n.isRecaptchaJSLibInjected=function(){return"undefined"!=typeof window&&(!(!document.scripts||0===document.scripts.length)&&Te([],document.scripts).filter(function(e){return null!==e.src.match(/((http|https):)?\/\/(www\.)?google\.com\/recaptcha\/(.*)/i)}).length>0)},n.startTimer=function(){n.waitingTimer=setTimeout(n._initializeRecaptcha,200)},n.clearTimer=function(){null!==n.waitingTimer&&clearInterval(n.waitingTimer)},n.waitingTimer=null,n.element=null,n.recaptchaId=null,n._captureRef=n.captureRef.bind(n),n._initializeRecaptcha=n.initializeRecaptcha.bind(n),n._handleExpired=n.handleExpired.bind(n),n._handleChange=n.handleChange.bind(n),n}return b(t,e),t.prototype.componentDidMount=function(){this.initializeRecaptcha()},t.prototype.componentWillUnmount=function(){this.clearTimer(),Ie()&&this.element&&null!==this.recaptchaId&&this.removeRecaptcha(),window.___grecaptcha_cfg&&(delete ___grecaptcha_cfg.clients[this.recaptchaId],___grecaptcha_cfg.count--)},t.prototype.render=function(){var e=this.props,t=h(e,["sitekey","onChange","theme","type","tabindex","onExpired","size","stoken","grecaptcha","badge"]);return Object(ue.h)("div",Te({},t,{ref:this._captureRef}))},t}(ue.Component);Ae.defaultProps={theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var Me,qe,De=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Re=Object(ue.h)("br",null),Be=function(e){function t(n){_(this,t);var r=O(this,e.call(this,n));return r.scrollAndFocus=function(){r.group.scrollIntoView({behavior:"smooth",block:"center"});try{r.group.querySelector("input, textarea, .ui-stars-star, .nice-select").focus()}catch(e){}},r.state={},r.group=null,r}return w(t,e),t.prototype.shouldComponentUpdate=function(e){return!Object(de.w)(e,this.props)},t.prototype.componentDidUpdate=function(e){!e.elementState.focusInvalid&&this.props.elementState.focusInvalid&&this.scrollAndFocus()},t.prototype.render=function(e){var t=this;return Object(ue.h)("div",{class:"control-group question "+(e.class?e.class:""),style:{display:e.show?"block":"none"},"data-index":e.groupIndex,key:e.key,id:e.id,ref:function(e){return t.group=e}},e.children)},t}(ue.Component),Ke=Object(ue.h)(je,{icon:"question"}),Ue=function(e,t){var n=e.children,r=e.block,o=v(e,["children","block"]),i=t.text,a={tabIndex:0};return["textarea","input"].indexOf(r.typeName)>-1&&(a.for="element-"+r.typeName+"-"+r.id),"section_break"!==r.typeName?Object(ue.h)("legend",{class:"block-title",id:"block-title-"+r.typeName+"-"+r.id},Object(ue.h)("label",a,n.map(function(e){return j(e)})),r.tooltip?Object(ue.h)("a",{href:"javascript:;",class:"tooltip"},Ke," ",Object(ue.h)("span",null,r.tooltip)):null,o.required?Object(ue.h)("span",{tabindex:"0","aria-label":i.requiredMarkLabel,class:"required-mark"},"*"):null):Object(ue.h)("h3",{class:"section-title"},n.map(function(e){return j(e)}))},He=function(e){var t=v(e,["children"]);return Object(ue.h)("div",{id:"section_description_"+t.block.id,class:"section-description"},j(t.block.properties.description))},ze=function(e){var t=v(e,["children"]),n=t.block,r=t.block.properties,o=void 0===r?{}:r;return Object(ue.h)("div",{id:"link_"+n.id,title:o.plaintext,tabindex:"0",class:"link_block"},function(){var e=o.hyperlinktext&&o.hyperlinktext.match(/\/\*(.*)\*\//gi)&&o.hyperlinktext.match(/\/\*(.*)\*\//gi)[0].replace("/*","").replace("*/",""),n={},r=void 0;if("function"===o.linktype)n.onClick=function(){"next_page"===o.linktype_function?t.setPage(!0,!0):"prev_page"===o.linktype_function?t.setPage(!1,!0):"close_modal"===o.linktype_function||"close_embedded"===o.linktype_function||"close"===o.linktype_function?t.closeForm():"start"===o.linktype_function&&t.startSurvey()};else{var i=o.hyperlinkhref&&o.hyperlinkhref.match(/((http(s?)))/gi)&&o.hyperlinkhref.match(/((http(s?)))/gi)?o.hyperlinkhref:""+o.hyperlinkprotocol+o.hyperlinkhref;n.href=i,n.target="_blank",n.onClick=function(){Object(de.A)({event:"redirect",key:t.surveyKey,formName:t.surveyProperties.name,url:i})}}return n.class=o.show_as_panels?"panel":o.show_as_buttons?"btn":"",r=(o.show_as_panels||o.show_as_buttons)&&o.icon?Object(ue.h)(je,{icon:o.icon}):"",Object(ue.h)("span",null,o.description.split(e).reduce(function(t,i,a){return a?t.concat(Object(ue.h)("a",n,"right"!==o.iconAlignment?[r,e]:[e,r]),i):[i]},[]))}())},We=function(e){var t=e.children;v(e,["children"]);return Object(ue.h)("div",{class:"alert alert-danger","aria-live":"assertive"},t)},Ve=function(e){function t(){var n,r,o;_(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=O(this,e.call.apply(e,[this].concat(a))),r.state={},r.getMedia=function(){var e=r.props,t=e.block.properties;return"image"===t.mediatype&&["jpg","jpeg","gif","png","svg"].indexOf(t.location.split(".").pop())>-1?Object(ue.h)("img",{src:Object(de.i)(t.location),style:"responsive"===t.media_size?{height:"auto",width:"100%"}:{height:t.media_height,width:t.media_width}}):["youtube","vimeo"].indexOf(t.mediatype)>-1&&t.location.match(/^(https\:\/\/www\.youtube)|^(https\:\/\/player\.vimeo)/gi)?Object(ue.h)("div",{style:"responsive"===t.media_size?{padding:"56.25% 0 0 0",position:"relative"}:{width:"100%",position:"relative",textAlign:t.media_align}},Object(ue.h)("iframe",{class:"video-frame",src:t.location,frameborder:0,allow:"accelerometer; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0,style:"responsive"===t.media_size?{height:"100%",width:"100%",position:"absolute",top:0,left:0}:{height:t.media_height,width:t.media_width}})):void 0},o=n,O(r,o)}return w(t,e),t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(e){return Object(ue.h)("div",{id:"multimedia_"+e.block.id,class:"section-multimedia"},this.getMedia())},t}(ue.Component),Ye=Object(ue.h)(je,{icon:"star",className:"is-before"}),Xe=Object(ue.h)(je,{icon:"star",className:"is-after"}),Je=function(e){function t(){var n,r,o;_(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=O(this,e.call.apply(e,[this].concat(a))),r.state={selectedScore:r.props.elementState.value||-1,hoverScore:-1,angry:"",sad:"",neutral:"",happy:"","extra-happy":""},r.emojis=["angry","sad","neutral","happy","extra-happy"],r.barInner=["--","-","0","+","++"],r.range=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=t-e+1;r--;)n[r]=t--;return n},r.getStateClass=function(e){var t=r.props.block.properties,n=r.state,o=n.hoverScore,i=n.selectedScore;return(-1!=o&&!t.reverseScore&&e<=o||-1!=o&&t.reverseScore&&e>=o?"ui-stars-star-hover":"")+"\n\t\t\t"+(-1!==i&&!t.reverseScore&&e<=i||-1!==i&&-1==o&&t.reverseScore&&e>=i?"ui-stars-star-on":"")},o=n,O(r,o)}return w(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props.block,n=this.context.requestDomain;"emoji"===t.properties.type&&Oe({domain:n}).getEmoji(t.id).then(function(t){return e.setState(De({},t))})},t.prototype.render=function(e,t){var n=this,r=e.block,o=e.block,i=o.typeName,a=o.properties,s=e.elementState,c="nps"===i?10:"bar"===a.type||"ces"===i||"emoji"===a.type?5:a.scale,l="numeric"===a.type||"stars"===a.type?a.includeZero?0:1:"nps"===i?0:1,p=a.reverseScore?this.range(l,c).reverse():this.range(l,c),u=a.legend?a.legend.legendLow:"",d=a.legend?a.legend.legendHigh:"",f=a.reverseScore?[].concat(this.emojis).reverse():this.emojis;return Object(ue.h)("div",{class:"rating-group "+i+"-group "+(a.type?a.type:"")+" "+(a.type?a.type:"")+"-group "+i+" "+("emoji"==a.type&&a.showCaptions?"show-labels":"")+" "+(a.reverseScore?"reversed":"")+" "+(a.legend?"has-legend":"")},Object(ue.h)("div",{class:"stars"===a.type||"ces"===i?"":"choice-row"},p.map(function(o,c){var l=["emoji","stars"].indexOf(a.type)>-1&&a.labelsAsValue?a["emoji"===a.type?"emoji":"elements"][o].label:o,p=De({},e,{key:c,selectableIndex:c,value:l,checked:String(s.value)===String(l),ariaLabel:a["emoji"===a.type?"emoji":"elements"]&&a["emoji"===a.type?"emoji":"elements"][o]?a["emoji"===a.type?"emoji":"elements"][o].label:o});if("emoji"===a.type&&(p.labelAtts={class:"emoji-"+f[c]},a.showCaptions&&(p.labelAtts["data-label"]=a.emoji[o].label)),"stars"===a.type||"ces"===i)return Object(ue.h)("div",{tabindex:"0","aria-label":"score "+o,class:"ui-stars-star star_"+o+" "+n.getStateClass(o),onClick:function(){n.setState({selectedScore:o},function(){e.updateForm(l,r,e.elementIndex)})},onMouseEnter:function(){t.hoverScore!==o&&n.setState({hoverScore:o})},onMouseLeave:function(){n.setState({hoverScore:-1})},onKeyDown:function(t){32!=t.keyCode&&13!=t.keyCode||n.setState({selectedScore:o},function(){e.updateForm(l,r,e.elementIndex)})}},"stars"===a.type&&Ye,"stars"===a.type&&Xe);var u="emoji"===a.type?{dangerouslySetInnerHTML:{__html:t[f[c]]||null}}:null;return Object(ue.h)(et,p,Object(ue.h)("span",De({ref:function(e){return n[f[c]]=e}},u),"emoji"!==a.type&&"bar"!==a.type?o:"bar"===a.type?n.barInner[c]:null))}),!a.showCaptions||"stars"!==a.type&&"ces"!==i?null:Object(ue.h)("span",{class:"caption"},-1==t.hoverScore&&-1==t.selectedScore?"":-1!=t.hoverScore?a.elements[t.hoverScore].label:a.elements[t.selectedScore].label)),a.legend&&Object(ue.h)("span",{className:"rating-legend legend-low"},u),a.legend&&Object(ue.h)("span",{className:"rating-legend legend-high"},d))},t}(ue.Component),Ge=function(e,t){var n=v(e,["children"]),r=n.block,o=r.properties,i=o.elements,a=o.values,s=o.weights;return Object(ue.h)("table",{class:"table table-striped "+n.block.typeName+"-table"},Object(ue.h)("thead",null,function(){return Object(ue.h)("tr",null,Object(ue.h)("th",{class:r.typeName+"-subject-label"}),Object.keys(a).map(function(e){return Object(ue.h)("th",{class:r.typeName+"-answer-label"},Object(ue.h)("div",null,Object(ue.h)("span",null,a[e].label)))}),s?Object(ue.h)("th",{class:r.typeName+"-spacer"}):null,s?Object.keys(s).map(function(e){return Object(ue.h)("th",{class:r.typeName+"-answer-label"},Object(ue.h)("div",null,Object(ue.h)("span",null,s[e].label)))}):null)}()),Object(ue.h)("tbody",null,function(){return Object.keys(i).map(function(e,o){var c=r.typeName+"_"+r.id+"_"+(o+1);return Object(ue.h)("tr",null,Object(ue.h)("td",{class:r.typeName+"-subject"},i[e].label),Object.keys(a).map(function(e,o){return Object(ue.h)("td",{class:r.typeName+"-answer","data-label":a[e].label},Object(ue.h)("div",{class:r.typeName+"-answer-inner"},Object(ue.h)("input",{type:"radio",name:c+("matrix"===r.typeName?"_value":"")+(t.isMultiple?"_"+t.multipleIndex:""),id:c+("matrix"===r.typeName?"_value":"")+"_"+o+(t.isMultiple?"_"+t.multipleIndex:""),value:a[e].value?a[e].value:a[e].label,onChange:function(e){e.target.checked&&n.updateForm(e.target.value,r,n.elementIndex,c+("matrix"===r.typeName?"_value":""))}}),Object(ue.h)("label",{for:c+("matrix"===r.typeName?"_value":"")+"_"+o+(t.isMultiple?"_"+t.multipleIndex:"")})))}),s?Object(ue.h)("td",{class:r.typeName+"-spacer"}):null,s?Object.keys(s).map(function(e,o){return Object(ue.h)("td",{class:r.typeName+"-answer","data-label":s[e].label},Object(ue.h)("div",{class:r.typeName+"-answer-inner"},Object(ue.h)("input",{type:"radio",name:c+"_weight"+(t.isMultiple?"_"+t.multipleIndex:""),id:c+"_weight_"+o+(t.isMultiple?"_"+t.multipleIndex:""),value:s[e].value?s[e].value:s[e].label,onChange:function(e){e.target.checked&&n.updateForm(e.target.value,r,n.elementIndex,c+"_weight")}}),Object(ue.h)("label",{for:c+"_weight_"+o+(t.isMultiple?"_"+t.multipleIndex:"")})))}):null,Object(ue.h)("input",{type:"hidden",id:c}))})}()))},Qe=function(e){var t=e.block,n=e.elementIndex,r=e.elementState,o=e.field,i=v(e,["children","block","elementIndex","elementState","field"]),a={onChange:function(e){i.updateForm(e.target.value,{event:"change"},n,o||"")},onInput:function(e){i.updateForm(e.target.value,{event:"input"},n,o||"")},onBlur:function(){},placeholder:t.properties.placeholder?t.properties.placeholder:"",value:r.value,"aria-labelledby":"block-title-"+t.typeName+"-"+t.id,id:"element-"+t.typeName+"-"+t.id};navigator.userAgent.match(/(iPod|iPhone|iPad)/i)&&(a.style={fontSize:"16px"});var s=t.properties.format?t.properties.format:"text";return"textarea"===t.typeName?Object(ue.h)("textarea",a):Object(ue.h)("input",De({},a,{type:s}))},$e=function(e){function t(){var n,r,o;_(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=O(this,e.call.apply(e,[this].concat(a))),r.state={value:r.props.elementState.value,label:"",listOpen:!1,maxHeight:250},r.setValue=function(e,t){var n=r.props,o=n.updateForm,i=n.block,a=n.elementIndex,s=n.field;r.setState({value:e,label:t},function(){o(r.state.value,i,a,s||"")})},r.toggleListOuter=function(e){r.select.contains(e.target)||r.toggleList()},r.toggleList=function(){clearTimeout(r.focusEvent);var e=r.select.getBoundingClientRect(),t="embed"===r.props.formType?window.innerHeight:r.props.contentDiv.offsetHeight,n=t-r.select.offsetTop-e.top-20;n=n>250?250:n,r.setState(function(e){return{listOpen:!e.listOpen,maxHeight:n}},function(){var e="embed"===r.props.formType?document:r.props.contentDiv;setTimeout(function(){r.state.listOpen?e.addEventListener("click",r.toggleListOuter):e.removeEventListener("click",r.toggleListOuter)})})},o=n,O(r,o)}return w(t,e),t.prototype.componentWillReceiveProps=function(e){e.elementState.value!==this.state.value&&this.setState({value:e.value,label:""})},t.prototype.options=function(){var e=this,t=this.props.block,n=this.state.listOpen;return Object.keys(t.properties.elements).map(function(r){var o=t.properties.elements[r],i=o.value?o.value:o.label,a=r===Object.keys(t.properties.elements).pop();return Object(ue.h)("li",{tabIndex:n?0:-1,onKeyDown:function(t){n&&(13===t.keyCode&&(e.setValue(i,o.label),e.toggleList()),a&&9===t.keyCode&&e.toggleList())},onClick:function(t){t.stopPropagation(),e.setValue(i,o.label),e.toggleList()},"data-value":i,id:"option_"+r,class:"option "+(i==e.state.value?"selected focus":"")},o.label)})},t.prototype.render=function(e,t){var n=this,r=e.block.properties.placeholder,o=void 0===r?"":r,i=t.label?t.label:o;return Object(ue.h)("div",{tabIndex:0,class:"nice-select "+(t.listOpen?"open":""),onClick:this.toggleList,onFocus:function(){n.focusEvent=setTimeout(function(){n.toggleList()},250)},ref:function(e){return n.select=e}},Object(ue.h)("span",{class:"current"},i),Object(ue.h)("ul",{class:"list",style:{maxHeight:t.maxHeight}},this.options()))},t}(ue.Component),Ze=Object(ue.h)(je,{icon:"check",className:"is-context-icon"}),et=function(e,t){var n=e.children,r=v(e,["children"]),o=r.block,i=["radio","checkbox"].indexOf(o.typeName)>-1?o.typeName:"radio",a=["radio","checkbox","gcr","thumbs","category"].indexOf(o.typeName)>-1?o.typeName+"-wrapper "+(["gcr","thumbs","category"].indexOf(o.typeName)>-1||o.properties.show_as_buttons?"button":""):r.block.typeName+"-choice",s={onChange:function(e){r.updateForm("checkbox"!==o.typeName?e.target.value:!!e.target.checked||"",o,r.elementIndex)},type:i,name:o.typeName+"-group-"+r.block.id+(t.isMultiple?"_"+t.multipleIndex:""),value:r.value,id:o.typeName+"-"+o.id+"_"+r.selectableIndex+(t.isMultiple?"_"+t.multipleIndex:""),checked:r.checked};return r.ariaLabel&&(s["aria-label"]=r.ariaLabel),r.hasOwnProperty("onClick")&&(s.onClick=function(e){r.onClick(e)}),Object(ue.h)("div",{class:a},Object(ue.h)("input",s),Object(ue.h)("label",De({for:s.id},r.labelAtts),["gcr","category","checkbox"].indexOf(o.typeName)>-1||o.properties.show_as_buttons&&"thumbs"!==o.typeName?Ze:null,n))},tt=function(e){function t(){var n,r,o;_(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=O(this,e.call.apply(e,[this].concat(a))),r.state={value:[]},o=n,O(r,o)}return w(t,e),t.prototype.render=function(e){var t=e.block,n=e.block.properties,r=["gcr","thumbs","category"].indexOf(t.typeName)>-1||n.show_as_buttons?"button-container "+e.block.typeName+"-container":"",o=n.reverseScore?Object.keys(n.elements).reverse():Object.keys(n.elements);return Object(ue.h)("div",{class:r},o.map(function(r,o){var i=n.elements[r],a=i.hasOwnProperty("value")?i.value:i.label,s="checkbox"===t.typeName&&i.isExtra?t.typeName+"_"+t.id+"_extra_"+i.extraKey:t.typeName+"_"+t.id+"_"+(i.initialKey?i.initialKey:r),c=De({},e,{value:a,key:o,selectableIndex:o,updateForm:function(t,n,r){e.updateForm(t,n,r,"checkbox"===n.typeName&&s)},checked:"checkbox"!==t.typeName?e.elementState.value==a:e.elementState[s].value&&"false"!=e.elementState[s].value});i.hasOwnProperty("onClick")&&"function"==typeof i.onClick&&(c.onClick=i.onClick),"thumbs"===e.block.typeName&&(c.labelAtts={class:"label_thumbs_"+(0==o?"positive":"negative"),title:0==o?"positive":"negative"});var l="thumbs"===t.typeName&&t.properties.showCaptions?{style:{verticalAlign:"middle"}}:{};return Object(ue.h)(et,c,i.icon?Object(ue.h)(je,De({icon:i.icon},l)):null,"thumbs"!==t.typeName?" "+i.label:null,Object.keys(l).length?Object(ue.h)("span",l," "+i.label):null)}))},t}(ue.Component),nt=function(e){var t=v(e,["children"]),n=t.block,r=n.properties;return Object(ue.h)("div",{class:"contact-wrapper"},function(){return Object.keys(r.elements).filter(function(e){return r.elements[e].show}).map(function(e){var o=r.elements[e],i=n.typeName+"_"+n.id+"_"+e,a=e.replace("2","")+"-wrapper",s="name"!=e&&o.placeholder?o.placeholder:"name"==e&&o.combine&&o.placeholder?o.placeholder:"name"!=e||o.combine?"":o.subelements.lastname.placeholder,c=De({},t,{elementState:De({},t.elementState[i]),block:De({},n,{field:i,isSub:!0,properties:{placeholder:s||"",elements:o.options?Object.keys(o.options).reduce(function(e,t){return e[t]={label:o.options[t]},e},{}):{}}}),field:i}),l="name"!==e||o.combine?null:De({},c,De({},c,{elementState:De({},t.elementState[n.typeName+"_"+n.id+"_firstname"]),block:De({},c.block,{field:n.typeName+"_"+n.id+"_firstname",properties:De({},c.block.properties,{placeholder:o.subelements.firstname.placeholder||""})}),field:n.typeName+"_"+n.id+"_firstname"}));return Object(ue.h)("div",{class:a},"title"===e?Object(ue.h)("div",null,Object(ue.h)($e,c),t.elementState[i].showError?Object(ue.h)(We,null,t.elementState[i].error):null):null,"name"===e&&o.combine?Object(ue.h)("div",null,Object(ue.h)(Qe,c),t.elementState[i].showError?Object(ue.h)(We,null,t.elementState[i].error):null):null,"name"!==e||o.combine?null:Object(ue.h)("div",null,Object(ue.h)(Qe,l),t.elementState[n.typeName+"_"+n.id+"_firstname"].showError?Object(ue.h)(We,null,t.elementState[n.typeName+"_"+n.id+"_firstname"].error):null),"name"!==e||o.combine?null:Object(ue.h)("div",null,Object(ue.h)(Qe,c),t.elementState[i].showError?Object(ue.h)(We,null,t.elementState[i].error):null),"name"!==e&&"title"!==e?Object(ue.h)("div",null,Object(ue.h)(Qe,c),t.elementState[i].showError?Object(ue.h)(We,null,t.elementState[i].error):null):null)})}())},rt=function(e){var t=e.children,n=v(e,["children"]),r={class:"btn "+("submit"===n.type?"btn-primary btn-submit pull-right":"next"===n.type?"btn-next pull-right":"btn-previous")+" "+(n.class?n.class:""),id:"submit"!==n.type?"btn_"+n.type+"_"+n.id:"surveySubmitBtn",type:"button",onClick:n.onClick,style:n.style?n.style:{}};return Object(ue.h)("button",r,t)},ot=function(e){function t(){var n,r,o;_(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=O(this,e.call.apply(e,[this].concat(a))),r.state={},r.getData=function(e){if("string"==typeof e&&(e=decodeURIComponent(e)),"object"!=typeof e)try{e=JSON.parse(e)}catch(e){}var t=e,n=t.type,o=t.value,i="";if("css_selector"===n){var a=void 0;try{a=document.querySelector(o)}catch(e){}a&&(i="INPUT"===a.nodeName?a.value:a.textContent)}else if("js"===n){var s=Object(de.j)(o);if(s){if("string"!=typeof s)try{s=JSON.stringify(s)}catch(e){}"string"==typeof s&&(i=s)}}else if("cookie"===n){var c=Object(de.g)(o);c&&(i=c)}else if("url_parameter"===n){var l=Object(de.l)(o,r.context.pageSearch);l&&"string"==typeof l&&(i=l)}return i},r.setData=function(){var e=r.props.block;setTimeout(function(){Object.keys(e.properties.elements).map(function(t,n){var o,i=e.properties.elements[t],a=(e.typeName+"_"+i.type+"_"+e.id+"_"+(n+1)).replace(/\W/g,"");r.setState((o={},o[a]=r.getData({type:i.type,value:i.value,id:a,key:n+1}),o),function(){r.props.updateForm(r.state[a],e,r.props.elementIndex,a)})})},300)},o=n,O(r,o)}return w(t,e),t.prototype.componentDidMount=function(){this.setData(),document.addEventListener("mopinion_shown",this.setData)},t.prototype.componentWillUnmount=function(){document.removeEventListener("mopinion_shown",this.setData)},t.prototype.render=function(){var e=this,t=this.props.block;return Object(ue.h)("div",null,Object.keys(t.properties.elements).map(function(n,r){var o=t.properties.elements[n],i=(t.typeName+"_"+o.type+"_"+t.id+"_"+(r+1)).replace(/\W/g,"");return Object(ue.h)("input",{type:"hidden",id:i,name:i,value:e.state[i]})}))},t}(ue.Component),it=Object(ue.h)(je,{icon:"camera"}),at=Object(ue.h)("div",{class:"detect-capture"},Object(ue.h)(je,{icon:"check"})),st=Object(ue.h)("span",{class:"required-mark"},"*"),ct=function(e){function t(){var n,r,o;_(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=O(this,e.call.apply(e,[this].concat(a))),r.state={showCapture:!1,captureSet:!1},r.toggleCapture=function(e){r.setState(function(t){return{showCapture:void 0!==e?e:!t.showCapture,captureSet:void 0===e||e?t.captureSet:e}},function(){(void 0===e||e)&&r.props.toggleScreenshot()})},r.showCapture=function(){r.setState({showCapture:!0},function(){r.props.toggleScreenshot(!0)})},r.removeCapture=function(){r.setState({showCapture:!1,captureSet:!1},function(){r.props.toggleScreenshot(!1)})},r.setCapture=function(){r.setState({captureSet:!0,showCapture:!1},function(){r.props.toggleScreenshot(!1)})},o=n,O(r,o)}return w(t,e),t.prototype.render=function(e,t){var n=this,r=e.block,o=e.block.properties,i=e.elementIndex,a=e.updateForm,s=e.text,c=e.webView,l=e.formType,p={toggleCapture:this.toggleCapture,updateForm:function(e,t){a(e,r,i,t)},block:r,setCapture:this.setCapture,showCapture:t.showCapture,removeCapture:this.removeCapture,text:s,formType:l,contentDiv:e.contentDiv};return c?Object(ue.h)("div",null,Object(ue.h)("input",{type:"checkbox",id:"screenshot_"+r.id,onChange:function(e){n.props.updateForm(e.target.checked&&"object"==typeof window&&window.screenToken?window.screenToken:"",r,i,"screenshot_"+r.id)}}),Object(ue.h)("label",{for:"screenshot_"+r.id},s.screenshotCheckboxLabel)):Object(ue.h)("div",{class:t.captureSet?"screen-captured":""},Object(ue.h)("div",{id:"screenshot_element_"+e.block.id,class:"section-screenshot "+(o.bottomScreen&&r.tooltip?"tooltip":""),onClick:function(){n.showCapture()}},it,at,o.bottomScreen&&r.tooltip?Object(ue.h)("span",{class:"tooltip"},r.tooltip):null,o.bottomScreen&&r.required?st:null,!e.formOpen&&"embed"!==l||!t.showCapture&&!t.captureSet?null:Object(ue.h)(Ee,p)))},t}(ue.Component),lt=Object(ue.h)("g",{"fill-rule":"evenodd","clip-rule":"evenodd"},Object(ue.h)("path",{fill:"#C82027",d:"M116.76 19.41L20.66.7a16.78 16.78 0 0 0-20 18.04l9.67 105.6a16.76 16.76 0 0 0 21.28 14.68l95.5-26.62a16.77 16.77 0 0 0 12.1-18.7l-9.03-60.25a16.63 16.63 0 0 0-13.42-14.03zm4.27 83.78h-16.35V70.45c0-7.93-.35-18.77-10.93-18.77-12.71 0-13.93 12.7-13.93 22.38v29.13H63.47V71.92c0-9.68-1.7-15.8-5.11-18.34a9.99 9.99 0 0 0-6.18-1.9c-12.59 0-13.88 13.25-13.88 22.78v28.73H22V38.62h16.3v7.42c10.93-12.02 30.94-13.11 39.08 2.54 7.32-10.75 21.7-15.25 33.3-8.7 9.87 5.4 10.35 15.33 10.35 25.46v37.85z"}),Object(ue.h)("path",{fill:"#FFF",d:"M121.03 103.2H104.7V70.44c0-7.92-.36-18.77-10.94-18.77-12.7 0-13.93 12.7-13.93 22.38v29.14H63.47V71.92c0-9.67-1.7-15.8-5.1-18.34a10 10 0 0 0-6.19-1.9c-12.58 0-13.88 13.26-13.88 22.79v28.73H22V38.62h16.3v7.42c10.94-12.02 30.95-13.1 39.08 2.54 7.33-10.75 21.71-15.24 33.3-8.69 9.87 5.39 10.36 15.32 10.36 25.46v37.84z"})),pt=(qe=Me=function(e){function t(){return _(this,t),O(this,e.apply(this,arguments))}return w(t,e),t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.componentDidMount=function(){this.brandingDiv.addEventListener("blur",this.props.onBlur)},t.prototype.componentWillUnmount=function(){this.brandingDiv.removeEventListener("blur",this.props.onBlur)},t.prototype.render=function(e,t){var n=this;return Object(ue.h)("div",{tabindex:"0",ref:function(e){return n.brandingDiv=e}},t.brandingContent?Object(ue.h)("span",{dangerouslySetInnerHTML:{__html:t.brandingContent}}):Object(ue.h)("div",{id:"branding",class:"branding anim",style:{textAlign:"center"}},Object(ue.h)("a",{href:"https://mopinion.com/?track=FormReferral",target:"_blank",class:"center-branding",style:{display:"inline-block!important"}},Object(ue.h)("span",{class:"brand-text",style:{display:"inline-block!important"}},"Powered by"),Object(ue.h)("span",{class:"brand-logo",style:{display:"inline-block!important"}},Object(ue.h)("svg",{xmlns:"http://www.w3.org/2000/svg",style:{display:"inline-block!important",verticalAlign:"middle"},viewBox:"0 0 140 140"},lt),Object(ue.h)("span",{style:{display:"inline-block!important"}},"opinion")))))},t}(ue.Component),Me.defaultProps={onBlur:function(){}},qe),ut=function(e){function t(){var n,r,o;_(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=O(this,e.call.apply(e,[this].concat(a))),r.reCaptchaNode=null,r.request=null,r.validateCaptcha=function(e){Oe({domain:r.context.requestDomain}).validateReCaptcha({surveyKey:r.context.surveyKey,recaptcha:e}).then(function(e){if(e.recaptchaValid)r.props.updateForm(!0,{},r.props.elementIndex);else try{r.reCaptchaNode.reset()}catch(e){}}).catch(function(){try{r.reCaptchaNode.reset()}catch(e){}})},r.expireCaptcha=function(){try{r.props.updateForm("",{},r.props.elementIndex)}catch(e){}},o=n,O(r,o)}return w(t,e),t.prototype.render=function(e){var t=this,n={ref:function(e){return t.reCaptchaNode=e},sitekey:e.surveyProperties.advanced.recaptcha.siteKey,onChange:function(e){return t.validateCaptcha(e)},onExpired:function(e){return t.expireCaptcha(e)}};return Object(ue.h)(Ae,n)},t}(ue.Component),dt=Object(ue.h)(je,{icon:"language"}),ft=Object(ue.h)("span",{className:"caret"}),ht=Object(ue.h)("div",{className:"toggle-caret"}),mt=function(e){function t(){var n,r,o;_(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=O(this,e.call.apply(e,[this].concat(a))),r.toggleMenu=function(e){r.setState(function(t){return{open:void 0!==e?e:!t.open}},function(){var e="embed"===r.props.formType?document:r.props.contentDiv;setTimeout(function(){r.state.open?e.addEventListener("click",r.closeMenu):e.removeEventListener("click",r.closeMenu)})})},r.closeMenu=function(){return r.toggleMenu(!1)},r.selectOption=function(e){r.setState({open:!1},function(){e!==r.props.current.usedTranslation&&r.props.onChange(e)})},o=n,O(r,o)}return w(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.current,r=void 0===n?{}:n,o=t.toggleOptions,i=void 0===o?{}:o,a=this.state.open,s=this.context.requestDomain,c=Object.keys(i).map(function(e){return i[e]}),l=c.filter(function(e){return e.value===r.usedTranslation})[0],p="https://"+s+"/assets/img/countryflags/";return Object(ue.h)("div",{className:"language-toggle-wrap"},Object(ue.h)("div",{className:"language-toggle "+(a?"open":"")+" "+(l&&l.countrycode?"has-icon":"")},Object(ue.h)("div",{onClick:this.toggleMenu,className:"toggle"},dt,Object(ue.h)("span",{className:"current-flag"},l&&l.countrycode?Object(ue.h)("img",{src:""+p+l.countrycode+".svg"}):""),Object(ue.h)("span",{className:"current"},l&&l.label),ft),Object(ue.h)("div",{className:"toggle-menu"},ht,Object(ue.h)("div",{className:"toggle-item-wrap"},c.map(function(t){return Object(ue.h)("div",{onClick:function(){return e.selectOption(t.value)},className:"toggle-menu-item "+(r.usedTranslation===t.value?"selected":"")},Object(ue.h)("span",{className:"toggle-menu-flag"},t.countrycode?Object(ue.h)("img",{src:""+p+t.countrycode+".svg"}):""," "),Object(ue.h)("span",{className:"toggle-menu-label"},t.label))})))))},t}(ue.Component),gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yt=Object(ue.h)(je,{icon:"refresh",className:"is-refresh-icon"}),bt=Object(ue.h)(je,{icon:"paper-plane-o",className:"is-context-icon"}),vt=Object(ue.h)(je,{icon:"angle-right",className:"is-context-icon"}),_t=Object(ue.h)(je,{icon:"angle-left",className:"is-context-icon"}),Ot=Object(ue.h)(je,{icon:"refresh",className:"is-refresh-icon"}),wt=Object(ue.h)(je,{icon:"paper-plane-o",className:"is-context-icon"}),jt=Object(ue.h)(je,{icon:"angle-left",className:"is-context-icon"}),kt=Object(ue.h)(je,{icon:"angle-right",className:"is-context-icon"}),xt=function(e){function t(n){k(this,t);var r=S(this,e.call(this,n));return r.state={class:""},r}return C(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this;e.noErrorsOnLastPage&&!this.props.noErrorsOnLastPage&&this.setState({isSubmitting:!0},function(){setTimeout(function(){t.props.formIsCompleted||t.setState({isSubmitting:!1})},2e3)})},t.prototype.blocks=function(){var e=this;return this.props.elements.map(function(t,n){var r,o=e.props.blocks[t.label],i=e.props.elements[n],a={key:o.id,class:o.typeName+" "+("rating"!==o.typeName?o.typeName:"")+"-group "+o.typeName+"-group-"+i.typeCount+" "+(o.tooltip?"has-tooltip":"")+" ",elementState:i,groupIndex:n,show:!(["website_data"].indexOf(o.typeName)>-1)&&i.isVisible,id:o.typeName+"-"+o.id},s=(r={updateForm:function(t,n,r,o){e.props.updateForm({value:t},n,r,o)},block:o,elementState:i,elementIndex:i.elementIndex,setPage:function(t,n){e.props.setPage(t,n)},closeForm:e.props.closeForm,contentDiv:e.props.contentDiv,toggleScreenshot:function(t){e.props.toggleScreenshot(t)},formOpen:e.props.formOpen},r.closeForm=function(){e.props.closeForm()},r.text=e.props.config.text,r.surveyProperties=e.props.config.properties,r.surveyKey=e.props.config.surveyKey,r.webView=e.props.webView,r.formType=e.props.formType,r);o.properties.option_extra&&Object.keys(o.properties.elements_extra);return t.page!=e.props.pageNumber||"screenshot"===o.typeName&&o.properties.bottomScreen&&!e.props.webView?null:Object(ue.h)(Be,a,Object(ue.h)(Ue,{required:t.required,block:o},o.title),"textarea"===o.typeName?Object(ue.h)(Qe,s):"input"===o.typeName?Object(ue.h)(Qe,s):"radio"===o.typeName?Object(ue.h)(tt,s):"checkbox"===o.typeName?Object(ue.h)(tt,s):"select"===o.typeName?Object(ue.h)($e,s):"rating"===o.typeName?Object(ue.h)(Je,s):"nps"===o.typeName?Object(ue.h)(Je,s):"ces"===o.typeName?Object(ue.h)(Je,s):"gcr"===o.typeName?Object(ue.h)(tt,s):"thumbs"===o.typeName?Object(ue.h)(tt,s):"category"===o.typeName?Object(ue.h)(tt,s):"contact"===o.typeName?Object(ue.h)(nt,s):"link"===o.typeName?Object(ue.h)(ze,s):"likert"===o.typeName?Object(ue.h)(Ge,s):"matrix"===o.typeName?Object(ue.h)(Ge,s):"screenshot"===o.typeName?Object(ue.h)(ct,s):"website_data"===o.typeName?Object(ue.h)(ot,s):"section_break"===o.typeName?Object(ue.h)(He,s):"recaptcha"===o.typeName?Object(ue.h)(ut,s):"multimedia"===o.typeName?Object(ue.h)(Ve,s):null,o.properties.option_extra&&Object.keys(o.properties.elements_extra).length?Object.keys(o.properties.elements_extra).map(function(t){var n=o.properties.elements_extra[t];n.typeName||(n.typeName="input");var r=o.typeName+"_"+o.id+"_extra_"+t,a=gt({},s,{updateForm:function(t,n,r,o){e.props.updateForm({value:t},n,r,o)},elementState:i[o.typeName+"_"+o.id+"_extra_"+t],field:r,block:{placeholder:n.placeholder||"",properties:{placeholder:n.placeholder||""}}});return Object(ue.h)("div",{style:{display:N(i,n,o)?"block":"none",marginTop:5}},"input"===n.typeName?Object(ue.h)(Qe,a):null)}):null,i.showError&&"contact"!==o.typeName?Object(ue.h)(We,null,i.error):null)})},t.prototype.buttons=function(){var e=this.state.isSubmitting,t=this.props,n=t.pageNumber,r=t.breakBlock,o=t.config,i=o.text,a=o.pageMap,s=o.properties.advanced,c=t.setPage,l=t.validateAndPost,p=t.didLastPageAutoPost,u=r.nextLabel||"Next",d=r.prevLabel||"Back",f=1==n,h=Object.keys(a).slice(-1).pop()==n,m={display:!s.lastPageAutoPost||p?"inline-block":"none"};s.hideNavigation&&(m.display="none");var g={display:!r.autoPost||r.autoPost&&r.didAutoPost?"inline-block":"none"},y={display:"inline-block"};return s.hideSubNavigation&&(g.display="none",y.display="none"),f&&h?Object(ue.h)("div",{class:"form-actions"},Object(ue.h)(rt,{type:"submit",class:e?"is-submitting":"",onClick:function(){l()},style:m},e?yt:Object(ue.h)("div",null,i.btnSubmitText," ",bt))):f?Object(ue.h)("div",{class:"form-actions"},Object(ue.h)(rt,{type:"next",id:r.id,onClick:function(){c()},style:g},u," ",vt)):h?Object(ue.h)("div",{class:"form-actions"},Object(ue.h)(rt,{type:"prev",id:r.id,onClick:function(){c(!1)},style:y},_t," ",i.btnLastBackText),Object(ue.h)(rt,{type:"submit",class:e?"is-submitting":"",onClick:function(){l()},style:m},e?Ot:Object(ue.h)("div",null,i.btnSubmitText," ",wt))):Object(ue.h)("div",{class:"form-actions"},Object(ue.h)(rt,{type:"prev",id:r.id,onClick:function(){c(!1)},style:y},jt," ",d),Object(ue.h)(rt,{type:"next",id:r.id,onClick:function(){c()},style:g},u," ",kt))},t.prototype.render=function(e){var t=this,n=e.pageNumber,r=e.isActivePage;return Object(ue.h)("div",{id:"page"+n,style:r?{display:"block"}:{display:"none"},ref:function(e){return t.page=e}},this.blocks(),this.buttons())},t}(ue.Component),St=Object(ue.h)("div",{class:"completed-anim do-anim"},Object(ue.h)(je,{icon:"check"})),Ct=function(e){function t(){var n,r,o;k(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=S(this,e.call.apply(e,[this].concat(a))),r.blocks=function(){var e=r.props,t=e.elements,n=e.isFirstPage,o=e.surveyKey,i=e.startSurvey,a=e.closeForm,s=e.formElements,c={startSurvey:i,closeForm:a,surveyKey:o,surveyProperties:""},l=Object.keys(t).filter(function(e){return t[e].show_as_panels}).length,p=n?"intro-page":"thanks-page";return Object.keys(t).map(function(e){var n=t[e],r=n.type,o=void 0!==n.genID?n.genID:e,i=gt({},c,{block:{id:n.genID,properties:{linktype:"link"!==n.use_as?"function":"link",linktype_function:n.use_as,plaintext:n.value,description:n.value,hyperlinktext:n.hyperlinktext,show_as_buttons:n.show_as_buttons,show_as_panels:n.show_as_panels,icon:n.icon,iconAlignment:n.icon_align,hyperlinkhref:n.hyperlinkhref}}}),a=n.show_as_panels?"panel-wrap":n.show_as_buttons?"btn-wrap":"",u="img"===n.type?"img-"+n.layout:"",d={textAlign:n.align,display:P(s,n),width:n.show_as_panels?1===l?"100%":l%2==0?"50%":"33%":"auto"};return Object(ue.h)("div",{className:"custom-section custompage-"+r+" "+a+" "+u,id:p+"_"+o,style:d},"text"===r?n.value:"icon"===r?Object(ue.h)(je,{icon:n.icon}):"link"===r?Object(ue.h)(ze,i):"img"===r?Object(ue.h)("img",{src:n.url,style:{height:"static"==n.layout?n.height:"auto",width:"static"==n.layout?n.width:"100%"}}):null)})},o=n,S(r,o)}return C(t,e),t.prototype.render=function(){var e=this.props,t=e.isFirstPage,n=e.config;return t?Object(ue.h)("div",{className:"front-page",id:"frontPage"},this.blocks()):"object"==typeof this.props.elements?Object(ue.h)("div",{class:"last-page",id:"lastPage"},this.blocks()):Object(ue.h)("div",{class:"last-page",id:"lastPage"},St,Object(ue.h)("span",{dangerouslySetInnerHTML:{__html:n.properties.exit_content}}))},t}(ue.Component),Pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nt=function(){var e="___test_storage";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}(),Et=Nt?{get:function(e){var t=localStorage.getItem(e);if(null!=t){var n=JSON.parse(t);if(null!=n.payload&&null!=n.expiry){if(new Date>Date.parse(n.expiry))return localStorage.removeItem(e),null}return JSON.parse(t).payload}return{}},set:function(e,t,n){var r=new Date;r.setSeconds(r.getSeconds()+n),localStorage.setItem(e,JSON.stringify({payload:t,expiry:r}))}}:{set:function(){},get:function(){}},Tt=(Nt&&Pt({},Et.get("__mIndexedCss")),function(e){function t(){return T(this,t),L(this,e.apply(this,arguments))}return F(t,e),t.prototype.render=function(e,t,n){var r=e.frame,o=n.styles,i=void 0===o?{}:o,a=n.surveyKey,s=n.themes,c=n.formKeys;if(0===Object.keys(i).length)return null;var l=i.base,p=E(i,["base"]);return Object(ue.h)("style",null,l,s.map(function(e){return p[e]}),r?p[a]:c.map(function(e){return p[e]}))},t}(ue.Component)),Lt=Tt,Ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},It=Object(ue.h)(Lt,{frame:!0}),At=function(e){function t(){var n,r,o;I(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=A(this,e.call.apply(e,[this].concat(a))),r.updateOnLoad=function(){r.key=Object(de.u)(),r.props.refresh&&r.props.refresh(),r.forceUpdate()},r.content=function(){return Object(ue.h)("div",null,Object(ue.h)("style",null,"html,body {margin:0;padding:0;overflow:hidden};"),It,r.props.children)},o=n,A(r,o)}return M(t,e),t.prototype.componentWillMount=function(){this.key=Object(de.u)()},t.prototype.componentDidMount=function(){var e=this,t=this.props.setRef;if(this.iframe&&this.iframe.contentDocument){var n=this.props.config.properties.advanced,r=n.analytics_integration,o=void 0===r?{}:r,i=n.block_webfont_loading,a=void 0!==i&&i;q(document,this.iframe.contentDocument,this.context.styleSheets,this.context.customScripts,this.context.webFonts,o,a),this.iframe.contentWindow.document.open("text/html","replace"),this.iframe.contentWindow.document.write("<!DOCTYPE html><html><head></head><body></body></html>"),this.iframe.contentWindow.document.close(),t&&t(this.iframe),setTimeout(function(){e.iframe.addEventListener("load",function(t){t.target||e.updateOnLoad()})},1e3)}},t.prototype.componentWillUnmount=function(){var e=this;setTimeout(function(){e.nextBase=null}),this.iframe.removeEventListener("load",this.updateOnLoad)},t.prototype.shouldComponentUpdate=function(e){return!Object(de.w)(e,this.props)},t.prototype.render=function(e){var t=this,n={ref:function(e){return t.iframe=e},id:"surveyWindow",class:"surveyWindow "+(this.props.class?this.props.class:""),style:{width:e.width?e.width:"100%",height:e.height?e.height:0,border:"none",borderRadius:"2px",background:"rgba(255,255,255,0.01)",transition:"all .2s",overflow:"hidden",willChange:"height"},title:this.props.config.properties.title+" feedback form",allowtransparancy:"true",frameBorder:"false",key:this.key};return"object"==typeof e.style&&Ft(n.style,e.style),Object(ue.h)("iframe",n,this.iframe&&this.iframe.contentDocument?Object(ue.h)(he.a,{into:this.iframe.contentDocument.body,ref:function(e){return t._portal=e}},this.content()):null)},t}(ue.Component),Mt=function(e){function t(){return D(this,t),R(this,e.apply(this,arguments))}return B(t,e),t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(e){return Object(ue.h)("iframe",e)},t}(ue.Component),qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dt=navigator.userAgent.match(/Trident/),Rt={position:"absolute",left:0,top:"-100%",width:"100%",height:"100%",margin:"1px 0 0",border:"none",opacity:"0",pointerEvents:"none",overflow:"hidden",zIndex:-1},Bt=function(e){function t(){var n,r,o;K(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=U(this,e.call.apply(e,[this].concat(a))),r.state={},r.handleResize=function(){try{r.props.onResize({height:r.div.scrollHeight,width:r.div.scrollWidth})}catch(e){}},o=n,U(r,o)}return H(t,e),t.prototype.componentWillMount=function(){this.key=Object(de.u)()},t.prototype.componentWillUnmount=function(){var e=this;setTimeout(function(){e.nextBase=null})},t.prototype.render=function(){var e=this,t={style:qt({},Rt),ref:function(t){return e.div=t}};return"pointerEvents"in document.body.style||(t.style.visibility="hidden"),Object(ue.h)("div",t,Object(ue.h)(Kt,{resize:this.handleResize,key:this.key}))},t}(ue.Component),Kt=function(e){function t(){var n,r,o;K(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=U(this,e.call.apply(e,[this].concat(a))),r.onLoad=function(){r.object.contentDocument.defaultView.addEventListener("resize",r.handleResize),r.handleResize()},r.handleResize=function(){r.props.resize&&r.props.resize()},o=n,U(r,o)}return H(t,e),t.prototype.componentWillUnmount=function(){var e=this;setTimeout(function(){e.nextBase=null})},t.prototype.componentDidMount=function(){var e=this;Dt&&(this.object.data="about:blank"),this.object&&this.object.contentDocument&&this.object.contentDocument.defaultView&&setTimeout(function(){e.onLoad()})},t.prototype.render=function(){var e=this,t={style:qt({},Rt),ref:function(t){return e.object=t},type:"text/html",onLoad:this.onLoad};return Dt||(t.data="about:blank"),Object(ue.h)("object",t)},t}(ue.Component),Ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ht=function(e,t){try{return t>e[0]?e[1]:e[1]*(t/e[0])}catch(e){return 0}},zt=Object(ue.h)(je,{icon:"check"}),Wt=function(e){function t(n){W(this,t);var r=V(this,e.call(this,n));return r.resizer=Object(de.z)(function(){r.setFormWidth()},150),r._getFormType=function(){return r.state.type},r.escapeButton=function(e){27===e.keyCode&&r.state.formOpen&&r.toggleForm()},r.refreshIframe=function(){r.setState({type:"embed"},function(){r.setState({type:X(r.props.config.properties,r.props.forceType).type})})},r.toggleScreenshot=function(e){var t=r.state.type,n=document.querySelector("html"),o=document.body,i="slide"==t?"mopinion-slider-active":"mopinion-modal-active";r.setState(function(t){return{screenshotActive:void 0!==e?e:!t.screenshotActive}},function(){"embed"!==t&&(r.state.screenshotActive?Object(de.t)([n,o],i):Object(de.a)([n,o],i))})},r.state=Ut({},X(n.config.properties,n.forceType),{formOpen:!1,intro:0,last:0,screenshotActive:!1,screenshotTaken:!1,formWidth:"40%",allowButton:n.showButton,pageHeight:0,displayNone:!0}),r.contentDiv=null,r.iframe=null,r.resizeObserver=null,r.formWidth=0,r.showTimer=null,r.windowKey=Object(de.d)(10),r.forceDiv=n.config.properties.advanced.modalUseDiv||1==Object(de.g)("ForceModalDiv"),r}return Y(t,e),t.prototype.setFormWidth=function(){var e=this.state.type,t=window.innerWidth,n="slide"===e?"425px":"40%";t>992&&t<1201?n="slide"===e?"400px":"45%":t<993&&t>768?n="slide"===e?"360px":"50%":t<769&&t>544?n="slide"===e?"320px":"70%":545>t&&(n="slide"===e?"260px":"90%"),n!==this.state.formWidth&&this.setState({formWidth:n})},t.prototype.componentDidMount=function(){var e=this,t=this.state.type,n=this.props,r=n.config,o=n.config.properties,i=n.forceOpen;"embed"===t&&Object(de.A)({event:"loaded",key:r.surveyKey,formName:o.name}),Object(de.A)({event:"ready",key:r.surveyKey,formName:o.name}),i&&(this.showTimer=setTimeout(function(){e.toggleForm(!0)},200)),this.setFormWidth(),window.addEventListener("resize",this.resizer)},t.prototype.componentDidUpdate=function(e){e.forceType!==this.props.forceType&&this.refreshIframe()},t.prototype.componentWillUnmount=function(){var e=this;setTimeout(function(){e.nextBase=null}),window.removeEventListener("resize",this.resizer);try{this.iframe&&this.iframe.contentDocument.removeEventListener("keydown",this.escapeButton)}catch(e){}try{clearTimeout(this.showTimer)}catch(e){}},t.prototype.componentWillReceiveProps=function(e){var t=this;e.forceOpen&&!this.props.forceOpen&&(this.showTimer=setTimeout(function(){t.toggleForm(!0)},200)),e.forceType&&e.forceType!==this.props.forceType&&this.setState(function(t){return Ut({},t,X({},e.forceType),{formOpen:!1})},function(){t.setFormWidth()}),e.formIsCompleted&&!this.props.formIsCompleted&&this.props.config.properties.timeout&&-1!==this.props.config.properties.timeout&&setTimeout(function(){"embed"!==t.state.type?t.toggleForm(!1):t.props.clearForm(t.props.config.surveyKey)},this.props.config.properties.timeout),e.showButton&&!this.props.showButton&&setTimeout(function(){t.setState({allowButton:!0})},100)},t.prototype.toggleForm=function(e){var t=this,n=this.props,r=n.config,o=n.config.properties,i=n.triggerMethod,a=n.cookieTime,s=this.state.type,c=this.context.track;Object(de.A)({event:void 0!==e||this.state.formOpen?void 0===e&&this.state.formOpen?"will_hide":e?"will_show":"will_hide":"will_show",key:r.surveyKey,formName:o.name,triggerMethod:i}),this.setState(function(t){return{formOpen:void 0===e?!t.formOpen:e}},function(){var e=document.querySelector("html"),n=document.body,l="slide"==t.state.type?"mopinion-slider-active":"mopinion-modal-active";if(t.state.formOpen){"embed"!==s&&Object(de.a)([e,n],l),Object(de.v)("MSopened",r.surveyKey,a),Object(de.v)("MSopened."+r.surveyKey,!0,a),setTimeout(function(){try{t.iframe.focus({preventScroll:!0})}catch(e){}},200);try{t.iframe&&t.iframe.contentDocument.addEventListener("keydown",t.escapeButton)}catch(e){}}else"embed"!==s&&Object(de.t)([e,n],l),t.props.onClose&&t.props.onClose();var p={event:t.state.formOpen?"shown":"hidden",key:r.surveyKey,formName:o.name,triggerMethod:i};Object(de.A)(p),c("Form "+(t.state.formOpen?"shown":"hidden"),{trigger_method:t.props.triggerMethod,form_completion_percentage:t.props.formCompletionPercentage,active_page:t.props.activePage,page_count:t.props.pageCount,form_type:t.state.type,subdomain:t.context.domain,organisation_id:r.properties.organisation_id,project_id:r.properties.project_id}),t.props.globalLogic()})},t.prototype.shouldComponentUpdate=function(e,t){return!(Object(de.w)(e,this.props)&&Object(de.w)(t,this.state))},t.prototype.setDimensions=function(e){var t=e.height,n=e.width;this.formWidth=n,this.setState(function(){return{pageHeight:t,pageWidth:n}})},t.prototype.pages=function(){var e=this,t=this.props,n=t.elements,r=t.blocks,o=t.config,i=t.activePage,a=t.breakBlocks,s=t.setPage,c=t.updateForm,l=t.updateFormSub,p=t.validateAndPost,u=t.formIsCompleted,d=t.noErrorsOnLastPage,f=t.webView,h=t.didLastPageAutoPost,m=this.state.type;Object.keys(o.pageMap).slice(-1).pop();return Object.keys(o.pageMap).map(function(t){var g=i===Number(t),y={elements:n.filter(function(e){return e.page==t}),breakBlock:a.hasOwnProperty(t)?a[t]:{},config:o,blocks:r,activePage:i,isActivePage:g,pageNumber:t,key:t,setPage:function(e,t){s(e,t)},updateForm:function(e,t,n,r){c(e,t,n,r)},updateFormSub:function(e,t,n,r,o){l(e,t,n,r,o)},validateAndPost:function(){p()},contentDiv:e.contentDiv,toggleScreenshot:function(t){e.toggleScreenshot(t)},formOpen:e.state.formOpen,formIsCompleted:u,noErrorsOnLastPage:d,closeForm:function(){e.toggleForm(!1)},startSurvey:function(){e.startSurvey()},webView:f,formType:m,didLastPageAutoPost:h};return Object(ue.h)(xt,y)})},t.prototype.getWrapStyle=function(){var e=this.state,t=e.position,n=e.type,r=e.formOpen,o={position:"fixed",zIndex:2000000001,backfaceVisibility:"hidden",transition:"transform .3s, visibility .225s","backface-visibility":"hidden"};if("slide"===n){if("right"===t){var i;Ut(o,(i={top:"10%"},i.top="calc(10% + 5px)",i.bottom="auto",i.left="auto",i.right=0,i.transform=r?"translateX(0)":"translateX(100%)",i["-webkit-transform"]=r?"translateX(0)":"translateX(100%)",i))}else if("bottom-right"===t)Ut(o,{top:"auto",bottom:"-5px",left:"auto",right:"2.5%",transform:r?"translateY(0)":"translateY(100%)","-webkit-transform":r?"translateY(0)":"translateY(100%)"});else if("bottom-left"===t)Ut(o,{top:"auto",bottom:"-5px",left:"2.5%",right:"auto",transform:r?"translateY(0)":"translateY(100%)","-webkit-transform":r?"translateY(0)":"translateY(100%)"});else if("left"===t){var a;Ut(o,(a={top:"10%"},a.top="calc(10% + 5px)",a.left=0,a.right="auto",a.transform=r?"translateX(0)":"translateX(-100%)",a["-webkit-transform"]=r?"translateX(0)":"translateX(-100%)",a))}o.width=this.state.formWidth}else Ut(o,{top:0,left:0,right:0,bottom:0,overflowY:"auto","-webkit-overflow-scrolling":"touch",backfaceVisibility:"hidden",width:"100%",minHeight:"100%",visibility:r?"visible":"hidden",pointerEvents:r?"auto":"none",zIndex:r?2000000001:-1});return o},t.prototype.wrap=function(){var e=this,t=this.props,n=t.config,r=this.state,o=r.formOpen,i=r.screenshotActive,a=this.context.text,s=navigator.userAgent.match(/(iPod|iPhone|iPad)/i);return"slide"===this.state.type?Object(ue.h)("div",{class:"mopinion-survey-content "+(n.properties.advanced.wcag?"wcag":""),"data-mop-form-type":this.state.type},Object(ue.h)("div",{ref:function(t){return e.wrapRef=t},id:"surveyWindowWrap",class:"surveyWindowWrap mopinion-slider slide-"+this.state.position+" "+(o?"mopinion-slider-active":"")+" "+(i?"screen-capture-active":""),"data-parent-for":n.surveyKey,style:this.getWrapStyle()},Object(ue.h)("div",{class:"surveySliderScroller",id:"surveySliderScroller",style:{maxHeight:"80vh",overflowY:"auto","-webkit-overflow-scrolling":"touch","-ms-overflow-style":"-ms-autohiding-scrollbar"}},Object(ue.h)(J,{height:this.state.pageHeight,ref:function(t){return e.frame=t},class:i?"screen-capture-active":"",config:this.props.config,refresh:this.refreshIframe,setRef:function(t){return e.iframe=t},useDiv:s||this.forceDiv,key:this.windowKey},Object(ue.h)("div",{id:"surveyBody",style:{overflow:"hidden"},class:"mopinion-slide",ref:function(t){return e.surveyBody=t}},Object(ue.h)("a",{ref:function(t){return e.closeButton=t},id:"closeModalBtn",title:a.closeBtnTitle,"aria-label":a.closeBtnTitle,class:"close-modal "+(n.properties.advanced.wcag?"wcag":""),href:"javascript:;",onClick:function(){e.toggleForm()}}),this.inner()))),this.button())):"modal"===this.state.type?Object(ue.h)("div",{class:"mopinion-survey-content","data-mop-form-type":this.state.type},Object(ue.h)(he.a,{into:"body",ref:function(t){return e.modalPortal=t}},Object(ue.h)("div",{class:"mopinion-survey-content","data-mop-form-type":this.state.type},Object(ue.h)("div",{ref:function(t){return e.wrapRef=t},id:"surveyWindowWrap",class:"surveyWindowWrap "+(i?"screen-capture-active":""),"data-parent-for":n.surveyKey,style:this.getWrapStyle(),onClick:function(t){t.target.isEqualNode(e.wrapRef)&&e.toggleForm()}},Object(ue.h)(J,{width:this.state.formWidth,height:this.state.pageHeight,style:{position:"absolute",top:"50px",left:0,right:0,marginLeft:"auto",marginRight:"auto",maxWidth:"480px",marginBottom:50,boxShadow:"0 8px 17px 0 rgba(0,0,0,0.2)",background:"rgb(255,255,255)",transition:"transform .225s, opacity .225s, height .175s",transform:o?"scale(1)":"scale(.95)",opacity:o?1:0},class:i?"screen-capture-active":"",ref:function(t){return e.frame=t},config:this.props.config,refresh:this.refreshIframe,setRef:function(t){return e.iframe=t},useDiv:this.forceDiv,key:this.windowKey},Object(ue.h)("div",{id:"surveyBody",style:{overflow:"hidden"},ref:function(t){return e.surveyBody=t}},Object(ue.h)("a",{ref:function(t){return e.closeButton=t},id:"closeModalBtn",title:a.closeBtnTitle,"aria-label":a.closeBtnTitle,class:"close-modal "+(n.properties.advanced.wcag?"wcag":""),href:"javascript:;",onClick:function(){e.toggleForm()}}),this.inner())),Object(ue.h)("div",{style:s?{height:"calc(100vh + 1px)"}:{}})))),this.button(),Object(ue.h)(he.a,{into:"body",ref:function(t){return e.surveyMaskPortal=t}},Object(ue.h)("div",{ref:function(t){return e.surveyMask=t},"data-mask-for":n.surveyKey,class:"mopinion-survey-mask "+(i?"screen-capture-active":"")+" "+(n.properties.advanced.wcag?"wcag":""),id:"surveyMask",style:{pointerEvents:o?"auto":"none",opacity:o?.15:0,visibility:o?"visible":"hidden",transition:"opacity .225s, visibility .225s",zIndex:o?"":-1}}))):Object(ue.h)("div",{"data-mop-form-type":this.state.type},this.inner())},t.prototype.progress=function(){var e=this.props,t=e.config,n=e.config.properties.advanced,r=e.formCompletionPercentage,o=e.activePage,i=e.pageCount;return n.showProgressbar&&!n.toggleDotview?Object(ue.h)("div",{id:"progress",class:"progress bar-layout"},Object(ue.h)("div",{id:"progressBar",class:"bar",style:{width:r+"%"}})):n.showProgressbar&&n.toggleDotview?Object(ue.h)("div",{class:"progress dot-layout",id:"progress"},Object.keys(t.pageMap).map(function(e){return Object(ue.h)("div",{style:{width:Math.floor(100/(i-1))+"%"},class:"progress-wrap "+(o>Number(e)?"completed":"")+" "+(e==o?"active":"")+" "+(e==i?"last":""),"data-pagecount":e},Object(ue.h)("div",{class:"progress-dot"},o>Number(e)?zt:e))})):void 0},t.prototype.globalScreenshot=function(){var e=this,t=this.props.elements.filter(function(e){return"screenshot"===e.type})[0],n=this.props.config.blocks[t.id],r={class:n.typeName+" "+n.typeName+"-group "+(n.tooltip?"has-tooltip":"")+" "+("screenshot"===n.typeName&&n.properties.bottomScreen?"section absolute":""),elementState:t,show:t.isVisible,id:n.id},o={updateForm:function(t,n,r,o){e.props.updateForm({value:t},n,r,o)},block:n,elementState:t,elementIndex:t.elementIndex,setPage:this.props.setPage,contentDiv:this.contentDiv,toggleScreenshot:function(t){e.toggleScreenshot(t)},formOpen:this.state.formOpen,text:this.props.config.text,formType:this.state.type};return Object(ue.h)(Be,r,Object(ue.h)(ct,o))},t.prototype.publicLandingPageFrame=function(){var e=this,t=this.props.config.properties.advanced,n=void 0===t?{}:t,r=this.state.hideLandingPageForm,o=Object(de.k)("mail_url",this.context.pageUrl)||n.landingspageUrl,i=document.querySelector("#publicSurveyBody")?"#publicSurveyBody":"body",a=n.landingspageTheme?n.landingspageTheme:"dark";if(!n.enableCustomBackground||!o.match(/^(?:(?:https?):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.​\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[​6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1​,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00​a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u​00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/gi))return null;var s={src:o,id:"mailUrl",class:"bg__mailing_Iframe",style:r?{zIndex:1}:{}},c={class:"close_custom_bg "+a,onClick:function(){e.setState({hideLandingPageForm:!0}),Object(de.t)([document.querySelector(i)],a)},href:"javascript:;"};return Object(de.a)([document.querySelector(i)],"customBackground"),Object(de.a)([document.querySelector(i)],a),n.landingspageTransparency&&Object(de.a)([document.querySelector(i)],"transparent"),Object(ue.h)(he.a,{into:i},Object(ue.h)("div",null,Object(ue.h)(Mt,s),r?null:Object(ue.h)("a",c,n.landingspageClose?Object(ue.h)("span",{class:"close_custom_bg_lbl "+a},n.landingspageClose):null)))},t.prototype.inner=function(){var e=this,t=this.state,n=t.type,r=t.formOpen,o=t.logoLoaded,i=this.props,a=i.elements,s=i.formIsCompleted,c=i.formIsOnOpenerPage,l=i.config,p=i.config.properties,u=i.screenshotOnAllPages,d=i.webView,f=i.webviewShowHeader,h=i.activePage,m=i.isLandingPageSurvey,g=i.startSurvey,y={class:"mopinion-survey-output "+this.context.themeName+" "+("slide"==n?"mopinion-slide":"")+" "+("modal"==n?"is-modal":"")+" "+("embed"!=n||d?"":"is-embed")+" on-"+(s?"page-thanks":c?"page-intro":"page-"+h)+" ","data-key":this.props.config.surveyKey,ref:function(t){return e.wrapperNode=t},style:{position:"relative"}},b={closeForm:function(){e.toggleForm(!1)},startSurvey:function(){g()},surveyKey:this.props.config.surveyKey};return"embed"!==n&&(y["data-mop-page-url"]=this.context.pageUrl),Object(ue.h)("div",{class:"mopinion-survey-content notranslate "+(p.advanced.wcag?"wcag":""),ref:function(t){return e.contentDiv=t},tabIndex:-1},Object(ue.h)("div",y,"embed"!==n||m||d&&f?Object(ue.h)("div",{id:"surveyHead"},p.logo?Object(ue.h)("img",{onLoad:function(){return e.setState({logoLoaded:!0})},style:o?{transition:"opacity .3s",opacity:1}:{transition:"opacity .3s",opacity:0,height:Ht(p.logoSize,this.formWidth)},src:r||o?Object(de.i)(p.logo):""}):null,Object(ue.h)("div",{id:"surveyTitle",tabindex:"0",title:s?"object"==typeof p.thanksPage?p.thanksPage.title:l.text.lastPageTitle:p.title,class:"srv-title main-title"},Object(ue.h)("h1",null,s?"object"==typeof p.thanksPage?p.thanksPage.title:l.text.lastPageTitle:p.title))):null,s||c||!p.advanced.showProgressbar?null:this.progress(),s||c?s?Object(ue.h)(Ct,Ut({},p.thanksPage,b,{config:l,isLastPage:!0,formElements:a})):Object(ue.h)(Ct,Ut({},p.introPage,b,{config:l,isFirstPage:!0})):this.pages(this.wrapper),s||c||!u||d?null:this.globalScreenshot()),"embed"!==n||m||d?Object(ue.h)(pt,{brandingContent:l.branding,onBlur:function(){try{e.closeButton.focus()}catch(e){}}}):null,p.translation&&p.translation.useTranslation&&p.translation.useToggle?Object(ue.h)(mt,Ut({},p.translation,{current:this.props.translation,onChange:function(t){return e.props.setLanguage(t)},contentDiv:this.contentDiv,formType:n})):null,Object(ue.h)(Bt,{onResize:function(t){return e.setDimensions(t)}}))},t.prototype.button=function(){var e=this,t=this.props,n=t.showButton,r=t.config,o=t.config.properties.trigger.button,i=this.state.allowButton,a={type:"button",id:"slide"==this.state.type?"surveySliderBtn":"",class:"slide"==this.state.type?"btn btn-open-slider "+this.context.themeName+" "+(i?"allow-button":"")+"  "+(r.properties.advanced.wcag?"wcag":""):"btn-open-survey btn btn-primary tab tab-"+this.state.position+" "+this.context.themeName+" "+(i?"allow-button":"")+" "+(r.properties.advanced.wcag?"wcag":"")+" "+(o.icon?"":"no-icon"),"data-button-for":this.props.config.surveyKey,title:r.text.btnOpenText,tabIndex:0,onClick:function(){e.toggleForm()},style:{opacity:i?1:0,visibility:i?"visible":"hidden"}};return i&&n?Object(ue.h)("button",a,o.icon?Object(ue.h)(je,{icon:""+o.icon}):null,r.text.btnOpenText&&"slide"!==this.state.type?Object(ue.h)("span",null,r.text.btnOpenText):null):null},t.prototype.render=function(e,t){var n=e.isPublicLandingPage,r=t.hideLandingPageForm,o=void 0!==r&&r;return Object(ue.h)("div",{"data-mop-page-url":this.context.pageUrl},o?null:this.wrap(),n?this.publicLandingPageFrame():null)},t}(ue.Component),Vt=1==Object(de.g)("MopinionDebug"),Yt=Q,Xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jt=function e(t){var n=this;$(this,e),this.send=function(e,t){n.metrics&&n.sendMetrics(e,t),n.ga&&n.sendGa(e)},this.sendFeedback=function(e){n.ga&&n.gaSendFeedback&&n.sendFeedbackGa(e)},this.sendMetrics=function(e,t){Object(de.g)("SQsession")||Object(de.v)("SQsession",Object(de.d)(),.5/24),setTimeout(function(){var r={project_token:n.surveyKey,datetime:new Date((new Date).getTime()-6e4*(new Date).getTimezoneOffset()).toISOString(),session:Object(de.g)("SQsession"),url:window.location.href,url_title:document.title,url_referrer:document.referrer,host:window.location.hostname,user_agent:navigator.userAgent,browser_language:navigator.language||navigator.userLanguage,viewport:window.innerWidth+"x"+window.innerHeight,Dextra:{eventName:e,eventProps:Xt({},t)}};Yt("Send Metrics",r),ge()({url:"https://metrics.mopinion.com/datapoints",method:"post",crossOrigin:!0,headers:{"Content-Type":"application/json"},data:JSON.stringify(r)}).then(function(e){return Yt(e)}).catch(function(e){return Yt(e)})},300)},this.initGa=function(){n.useGtag?void 0===window.gtag?Object(de.b)("https://www.googletagmanager.com/gtag/js?id="+n.gaId,{onLoad:function(){window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",n.gaId,{send_page_view:!1})}}):gtag("config",n.gaId,{send_page_view:!1}):void 0===window.ga?(!function(e,t,n,r,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src="https://www.google-analytics.com/analytics.js",a.parentNode.insertBefore(i,a)}(window,document,"script",0,"ga"),ga("create",n.gaId,{name:"mopinion-"+n.surveyKey})):ga("create",n.gaId,{name:"mopinion-"+n.surveyKey})},this.sendGa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o="Mopinion Form - "+n.surveyName+r;Yt("Send Analytics",e,t,o),n.useGtag?gtag("event",e,Xt({event_category:o,send_to:n.gaId},t?{event_label:t}:{})):ga("mopinion-"+n.surveyKey+".send",Xt({hitType:"event",eventCategory:o,eventAction:e},t?{eventLabel:t}:{}))},this.sendFeedbackGa=function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(e,t){e.title&&n.sendGa("Q"+(t+1)+" - "+e.title,e.value," - Feedback")})};var r=t.properties,o=r.advanced,i=o.analytics_integration,a=void 0===i?{}:i,s=o.logMetrics;if(this.surveyKey=t.surveyKey,this.surveyName=t.properties.name,s&&(this.metrics=!0,Yt("Tracking Metrics")),a.load_analytics){var c="";try{c=ga.getAll()[0].get("trackingId")}catch(e){}this.useGtag="analytics.js"!==a.type,this.gaId=a.GA_TRACKING_ID||c||"",this.gaSendFeedback=!!a.sendFeedback,this.gaId&&(this.ga=!0,Yt("Tracking Analytics"),this.initGa())}},Gt=n("MNpE"),Qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$t=null,Zt=function(e){function t(n){ee(this,t);var r=te(this,e.call(this,n));if(r.startUrlTimer=function(){r.urlTimer=setInterval(function(){r.state.pageUrl!==document.location.href&&r.setState(function(e){return Qt({},e,{pageUrl:document.location.href,pageSearch:"?"+r.state.pageUrl.split("?").slice(1).join("?")})})},500)},r.setConfig=function(){if(Object(de.o)(r.props.initialConfig.layout)){var e=Gt({},r.props.initialConfig),t=!1,n=1,o={},i=!1,a={},s=[],c={},l=r.props.initialConfig.properties.translation;if(l&&l.useTranslation){var p=r.whichLanguage(l);if(p&&l[p]){c=Qt({usedTranslation:p},l[p]);try{e=Gt(r.props.initialConfig,l[p])}catch(e){}}}var u=e.layout.reduce(function(c,l){var p=e.blocks[l];a.hasOwnProperty(p.typeName)?a[p.typeName]++:a[p.typeName]=1;var u={field:p.typeName+"_"+p.id,label:p.id,id:p.id,data_field:p.data_field,value:function(){if(p.properties.preselectScore){s.push(p.id);var e=void 0;return"nps"===p.typeName||"thumbs"===p.typeName?e=Object(de.l)(p.typeName,r.state.pageSearch):"rating"===p.typeName&&(e="emoji"===p.properties.type?Object(de.l)("smiley",r.state.pageSeach):Object(de.l)("score",r.state.pageSearch)),e&&(t=!0),e}return p.properties.value?p.properties.value:""}(),type:p.typeName,error:"",required:p.properties&&p.properties.required,page:n,validateSubFields:[],validateExtraFields:[],isVisible:!p.properties.hide_on_init,setValueCookie:!(!p.properties||!p.properties.setScoreCookie),typeCount:a[p.typeName],isEmail:"email"===p.properties.format,isPhone:"tel"===p.properties.format},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return{data_field:e.data_field,value:"",error:"",isEmail:"email"===t,isPhone:"phone"===t||"phone2"===t,required:e.required||u.required||!1,page:n,isSub:!0,key:t,valueLabel:r,errorOnParent:["matrix","likert","checkbox","screenshot"].indexOf(p.typeName)>-1}};if(["contact","matrix","likert","checkbox","website_data","screenshot"].indexOf(p.typeName)>-1&&p.properties.elements&&Object.keys(p.properties.elements).reduce(function(e,t){var r=p.properties.elements[t];if("contact"===p.typeName){if(r.show)if("name"!==t||r.combine){var o=p.typeName+"_"+p.id+"_"+t;e[o]=Qt({field:o},d(r,t,n)),e.validateSubFields=[].concat(e.validateSubFields,[o])}else Object.keys(r.subelements).forEach(function(t){var o=p.typeName+"_"+p.id+"_"+t.replace("last","");e[o]=Qt({field:o},d(Qt({},r.subelements[t],{required:r.required}),t,n)),e.validateSubFields=[].concat(e.validateSubFields,[o])});e.errorOnChildren=!0}else e.errorOnParent=!0;if("likert"===p.typeName){var a=p.typeName+"_"+p.id+"_"+t;e[a]=Qt({field:a},d(r,t,n)),e.validateSubFields=[].concat(e.validateSubFields,[a])}if("matrix"===p.typeName){var s=p.typeName+"_"+p.id+"_"+t+"_value";e[s]=Qt({field:s},d({data_field:r.data_field.value,required:r.required},t,n));var c=p.typeName+"_"+p.id+"_"+t+"_weight";e[c]=Qt({field:c},d({data_field:r.data_field.weight,required:r.required},t,n)),e.validateSubFields=[].concat(e.validateSubFields,[s,c])}if("website_data"===p.typeName){var l=p.typeName+"_"+r.type+"_"+p.id+"_"+t;e[l]=Qt({field:l,isVisible:!1},d(r,t,n))}if("checkbox"===p.typeName){var u=p.typeName+"_"+p.id+"_"+t;e[u]=Qt({field:u},d(r,t,n)),e.validateSingle=!0,e.validateSubFields=[].concat(e.validateSubFields,[u])}if("screenshot"===p.typeName){var f=t+"_"+p.id;e[f]=Qt({field:f},d(p,t,n)),p.properties.bottomScreen&&(i=!0),e.validateSubFields=[].concat(e.validateSubFields,[f]),e.hasOwnProperty("screenshot_"+p.id)&&(e["screenshot_"+p.id]=Qt({field:"screenshot_"+p.id},d(p,"screenshot_"+p.id,n)),e.validateSubFields=[].concat(e.validateSubFields,["screenshot_"+p.id]))}return e},u),p.properties.option_extra&&p.properties.elements_extra&&Object.keys(p.properties.elements_extra).reduce(function(e,t){var r=p.properties.elements_extra[t];r.valueLabel=r.linkedLabel||r.label;var o=p.typeName+"_"+p.id+"_extra_"+t;if(e[o]=Qt({field:o},d(r,t,n),{valueLabel:r.linkedLabel||r.label}),e.validateExtraFields=[].concat(e.validateExtraFields,[o]),e.hasExtraFields=!0,"checkbox"===p.typeName&&(e.validateSingle=!0,e.hasExtraLinked=!0,r.linkedLabel)){var i=Object(de.c)(Object.keys(p.properties.elements_extra),function(e){return p.properties.elements_extra[e].label===r.linkedLabel});return-1!==i&&(e[o].linkedField=p.typeName+"_"+p.id+"_extra_"+(i+1)),e}return p.properties.elements[String(Number(Object.keys(p.properties.elements).pop())+1)]=Qt({},r,{value:r.label,valueLabel:r.linkedLabel||r.label,isExtra:!0,extraKey:t}),e},u),u.normalizedLogic=e.blockRules.hasOwnProperty(p.id)?e.blockRules[p.id].map(function(e){return"object"==typeof e?(e.condition.elements?e.condition.testValue=e.condition.elements.map(function(e){if(!(["gcr","radio","checkbox","select","thumbs","category"].indexOf(p.typeName)>-1||p.properties.labelsAsValue&&!isNaN(e)))return String(e);var t="rating"===p.typeName&&"emoji"===p.properties.type?p.properties.emoji:p.properties.elements;for(var n in t)if(n==e)return String(t[n].value?t[n].value:t[n].label)}):e.condition.trigger_element&&(e.condition.testValue=[e.condition.trigger_element]),e):{}}):[],p.properties.randomize){var f=Object.keys(p.properties.elements).reduce(function(e,t){return p.properties.elements[t].isExtra||(e[t]=Qt({},p.properties.elements[t],{initialKey:t})),e},{});p.properties.prevElements=p.properties.elements;var h=Object(de.r)(Object(de.x)(Object.keys(f)),f);Object.keys(h).forEach(function(t,n){e.blocks[l].properties.elements[n+1]=h[t]})}return"page_break"!==p.typeName?c.push(u):"page_break"===p.typeName&&(o[n]={page:n,prevLabel:p.properties.prevLabel,nextLabel:p.properties.nextLabel,id:p.id,autoPost:p.properties.autopost},n++),c},[]).map(function(e,t){return e.elementIndex=t,e}),d=e.properties.advanced.customLibraries,f=void 0===d?[]:d;if("object"==typeof e.properties.advanced.recaptcha&&e.properties.advanced.recaptcha.siteKey&&(u=[].concat(u,[{field:"recaptcha",label:"recaptcha",id:"recaptcha",value:"",type:"recaptcha",error:"",required:!0,page:Number(Object.keys(e.pageMap).slice(-1).pop()),validateSubFields:[],isVisible:!0,setValueCookie:!1,normalizedLogic:[],elementIndex:u.length}]),e.blocks.recaptcha={typeName:"recaptcha",properties:{}}),e.properties.thanksPage&&e.properties.thanksPage.elements){var h=e.properties.thanksPage&&e.properties.thanksPage.elements?Object.keys(e.properties.thanksPage.elements).map(function(t,n){var r=e.properties.thanksPage.elements[t];return{field:"thanks-page_"+r.genID,hide_on_init:r.hide_on_init,label:"thanks-page_"+r.genID,id:"thanks-page_"+r.genID,value:"",type:r.type,error:"",required:!1,validateSubFields:[],isVisible:!r.hide_on_init,setValueCookie:!1,normalizedLogic:[],elementIndex:u.length+n}}):[];u=[].concat(u,h)}r.track=new Jt(e),Qt(be.a,e.icons),r.setState(function(t){var n=Qt(t.errorMessages,e.text.errors);return{elements:u,config:e,errorMessages:n,configWasLoaded:!0,breakBlocks:o,theme:e.theme,pageCount:Number(Object.keys(e.pageMap).slice(-1).pop()),themeName:e.themeClass,customScripts:f,screenshotOnAllPages:i,logMetrics:e.properties.advanced.logMetrics,formIsOnOpenerPage:!!e.properties.introPage,translation:c}},function(){r.state.customScripts.length&&r.state.customScripts.forEach(function(e){"inner"!==e.scope&&Object(de.b)(e.url)}),s.forEach(function(e){var t=Object(de.c)(r.state.elements,function(t){return t.id===e});r.logic(r.state.elements[t])}),r.state.config.properties.advanced.block_webfont_loading||Object(de.p)(r.state.config.webFonts),r.state.config.properties.introPage&&r.setState(function(){return{formIsOnOpenerPage:!0}}),t&&setTimeout(function(){r._forcePost()},300),r.startState=r.state,r.globalLogic(),r.state.isLandingPageSurvey&&(document.title=r.state.config.properties.title)})}},r.postApi=function(e,t,n){var o=r.state,i=o.config,a=o.config,s=a.sendOptions,c=a.properties,l=o.sendMode;r.api.postFeedback({token:s.token,domain:s.domain,surveyId:i.properties.id,ip:i.cip,feedback:r._collectFeedback(),mode:l}).then(function(){"insert"===l?r.setState({sendMode:"upsert"},function(){"function"==typeof e&&e()}):"function"==typeof e&&e(),setTimeout(function(){var e=r._collectFeedback(!0);Object(de.A)({event:t?"next":"feedback_sent",key:i.surveyKey,formName:c.name,feedback:e}),r.track.send(t?"Next page":"Feedback sent",{trigger_method:r.props.triggerMethod,form_completion_percentage:r.state.formCompletionPercentage,active_page:r.state.activePage,page_count:r.state.pageCount,form_type:r.form&&r.form._getFormType(),subdomain:r.props.domain,organisation_id:r.state.config.properties.organisation_id,project_id:r.state.config.properties.project_id}),t||n||(r.track.sendFeedback(r._collectFeedback(!0,!0)),r.props.feedbackId||(r.feedbackId=Object(de.d)(10)),r.customerId=Object(de.d)(20),c.notify&&c.notify.send&&r.notifyUser(e,c.notification_email,c.notify.add_feedback))}),t||n||(Object(de.v)("MSFeedbackSent",i.surveyKey,r.props.cookieTime||30),Object(de.v)("MSFeedbackSent"+i.surveyKey,!0,r.props.cookieTime||30))}).catch(function(e){return Yt(e)})},r._collectFeedback=function(e,t){var n=r.state,o=n.elements,i=n.config,a=n.config.sendOptions,s=n.translation,c=r.props.webView,l=a.data.reduce(function(n,r){var a=r.field,s=r.type,l=r.label,p=o.filter(function(e){return e.field==a||e.hasOwnProperty(a)})[0],u="";p&&(u=p.hasOwnProperty(a)?p[a].value:p.value),c&&(s=s.replace("image","mobile_image"));var d={label:l,value:u,type:s};if(e){var f=i.blocks[p.id];if(d=Qt({},d,{title:f.title,id:f.id,type:f.typeName,field:a}),t&&(["input","textarea","screenshot","website_data"].indexOf(f.typeName)>-1||["customer","id","url"].indexOf(s)>-1||"Page title"===l))return n}return n.push(d),n},[]),p=Object(de.m)(c);return l=[].concat(l,[{value:navigator.userAgent,type:"agent",label:"User Agent"},{value:r.state.pageUrl,type:"url",label:"url"},{value:document.title,type:"category",label:"Page title"},{value:1,type:"role",label:"Role"},{value:i.properties.name,type:"category",label:"Survey"},{value:r.state.viewPort,type:"viewport",label:"Viewport"},{value:r.props.triggerMethod,type:"category",label:"Form trigger"},{value:r.state.formCompletionPercentage,type:"form_completion",label:"Form completion percentage"},{value:r.feedbackId,type:"id",label:"Survey ID"}],Object.keys(s).length>0?[{value:s.usedTranslation,type:"category",label:"Translation"}]:[],p),!1!==a.force_customer&&(l=[].concat(l,[{value:r.customerId,type:"customer",label:a.force_customer.label}])),l},r.notifyUser=function(e,t,n){var o=r.state.config.surveyKey,i=Object(de.c)(e,function(e){return e.field===t||e.hasOwnProperty(t)});if(-1!==i){var a=e[i].hasOwnProperty(t)?e[i][t]:e[i];a.value&&r.api.notifyUser(Qt({surveyKey:o,email:a.value},n&&{feedback:e}))}},r.setLanguage=function(e){var t=r.state.config.properties.translation;t[e]&&r.setState(function(n){return Qt({},n,{config:Gt(r.props.initialConfig,t[e]),errorMessages:Gt.all([n.errorMessages,Object(de.f)(r.props.initialConfig,"text.errors",{}),Object(de.f)(t[e],"text.errors",{})]),translation:Qt({usedTranslation:e},t[e])})})},r._forceOpen=function(){try{r.form.toggleForm(!0)}catch(e){}},r._forceClose=function(){try{r.form.toggleForm(!1)}catch(e){}},r._forcePost=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r.postApi(function(){e&&r.setState({formIsCompleted:!0})},!1,!0)},r._setPage=function(){r.setPage(!(arguments.length>0&&void 0!==arguments[0])||arguments[0],!(arguments.length>1&&void 0!==arguments[1])||arguments[1])},r._getFormState=function(){return Qt([],r.state.elements)},r._getFormConfig=function(){return Qt({},r.state.config)},r._setValue=function(e,t){var n=r.state.elements.filter(function(t){return t.field==e})[0],o="string"==typeof t?{value:t}:t;if(n)r.updateForm(o,{},n.elementIndex);else{var i=r.state.elements.filter(function(t){return t.hasOwnProperty(e)})[0];i&&r.updateForm(o,{},i.elementIndex,e)}},r._setBlock=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.setState(function(n){var r;return Qt({},n,{config:Qt({},n.config,{blocks:Qt({},n.config.blocks,(r={},r[e]=Qt({},n.config.blocks[e],t),r))})})})},r._setBlockProperties=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.setState(function(n){var r;return Qt({},n,{config:Qt({},n.config,{blocks:Qt({},n.config.blocks,(r={},r[e]=Qt({},n.config.blocks[e],{properties:Qt({},n.config.blocks[e].properties,t)}),r))})})})},r._setBlockInnerElement=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.setState(function(r){var o,i;return Qt({},r,{config:Qt({},r.config,{blocks:Qt({},r.config.blocks,(i={},i[e]=Qt({},r.config.blocks[e],{properties:Qt({},r.config.blocks[e].properties,{elements:Qt({},r.config.blocks[e].properties.elements,(o={},o[t]=Qt({},r.config.blocks[e].properties.elements[t],n),o))})}),i))})})})},r._setProperties=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.setState(function(t){return Qt({},t,{config:Qt({},t.config,{properties:Qt({},t.config.properties,e)})})})},r._setText=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.setState(function(t){return Qt({},t,{config:Qt({},t.config,{text:Qt({},t.config.text,e)})})})},r._setErrors=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.setState(function(t){return Qt({},t,{errorMessages:Qt({},t.errorMessages,e)})})},r._clearForm=function(){r.setState(function(e){return Qt({},r.state.formIsCompleted?r.startState:e,{forceOpen:!1,renderNull:!0})})},r.state={configWasLoaded:!1,modalVisible:!1,validateOnChange:!1,elements:[],config:{properties:{},blocks:{},text:{},layout:[],theme:"isLoading",themeCustom:{}},errorMessages:{deflt:"Something went wrong",required:"This field is required",required_multi:"All fields are required",invalid_number:"This is not a valid number",invalid_phone:"This is not a valid phone number",invalid_email:"This is not a valid email address",too_short:"The answer is too short",too_long:"The answer is too long"},activePage:1,pageCount:1,modalStyle:"small",modalBackdrop:!1,formIsCompleted:n.isCompleted,formIsOnOpenerPage:!1,formStatus:"",userAgent:navigator.userAgent,viewPort:window.innerWidth+"x"+window.innerHeight,divName:n.divName||"body",sendMode:n.feedbackId?"upsert":"insert",followUpId:!1,triggerMethod:n.triggerMethod,formCompletionPercentage:0,isLandingPageSurvey:document.location.pathname.indexOf("/survey/public/take-survey/")>-1||document.location.pathname.indexOf("/survey/public/email-survey/")>-1,isPublicLandingPage:document.location.pathname.indexOf("/survey/public/take-survey/")>-1,isPreviewPage:document.location.pathname.indexOf("/survey/manage/preview/")>-1,pageUrl:document.location.href,pageSearch:"",noErrorsOnLastPage:!1,forceOpen:n.forceOpen},r.state.isLandingPageSurvey)try{r.state.pageUrl=r.state.pageUrl+document.querySelector("#public-survey-page-querystring").value}catch(e){r.state.pageUrl=document.location.href}r.state.pageSearch="";try{r.state.pageSearch="?"+r.state.pageUrl.split("?").slice(1).join("?")}catch(e){}return r.urlTimer=null,r.requestDomain=n.proxyDomain?n.proxyDomain:n.domain,r.track=null,r.feedbackId=n.feedbackId?Object(de.h)(n.feedbackId):Object(de.d)(10),r.customerId=Object(de.d)(20),r.api=Oe({domain:n.domain,formKey:n.formKey,webView:n.webView}),r}return ne(t,e),t.prototype.getChildContext=function(){var e=this;return{config:this.state.config,theme:this.state.config.theme,themeName:this.state.themeName,text:this.state.config.text,customScripts:this.state.customScripts,webFonts:this.state.config.webFonts,scope:this,domain:this.props.domain,pageUrl:this.state.pageUrl,pageSearch:this.state.pageSearch,surveyKey:this.state.config.surveyKey,track:function(t,n){e.track.send(t,n)},css:this.state.css,requestDomain:this.requestDomain,isMultiple:this.props.isMultiple,multipleIndex:this.props.multipleIndex}},t.prototype.componentDidUpdate=function(e){this.props.forceOpen!==e.forceOpen&&this.setState({forceOpen:this.props.forceOpen})},t.prototype.componentDidMount=function(){this.setConfig(),this.startUrlTimer()},t.prototype.componentWillUnmount=function(){var e=this;setTimeout(function(){e.nextBase=null});try{this.config.abort()}catch(e){}clearInterval(this.urlTimer)},t.prototype.validateElement=function(e){var t=this,n=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n.isVisible||n.isSub?Object.keys(o).length&&!o.isVisible?{showError:!1,error:""}:n.notAllValid?{showError:!0,error:t.state.errorMessages[n.validateSingle?"required":"required_multi"]}:String(e)||r||n.hasOwnProperty("notAllValid")?e&&n.isEmail?{showError:!function(e){return e.match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}(e),error:t.state.errorMessages.invalid_email}:e&&n.isPhone?{showError:!function(e){return e.length>9&&e.match(/^[\(\)\s\-\+\d]{10,17}$/)}(e),error:t.state.errorMessages.invalid_phone}:{showError:!1,error:""}:{showError:!0,error:t.state.errorMessages.required}:{showError:!1,error:""}},r=function(e){e.validateSubFields.reduce(function(t,r){return t[r]=Qt({},e[r],n(e[r].value,e[r])),t},e);var t=e.validateSubFields.filter(function(t){return e[t].showError});return e.notAllValid=e.validateSingle?e.validateSubFields.length-1<t.length:0!==t.length,Qt({},e,n(e.value,e))};if(e.page===this.state.activePage&&(e.required||e.isEmail||e.isPhone||e.errorOnChildren)){if(e.required||!e.isPhone&&!e.isEmail){if(e.hasExtraFields){var o=e.validateExtraFields.filter(function(t){return e.hasExtraLinked&&e[t].linkedField?e[e[t].linkedField].value&&"false"!==e[e[t].linkedField].value:e[t].valueLabel===e.value})[0];return o?Qt({},e,n(e[o].value,e[o],!e[o].required)):e.errorOnParent?r(e):Qt({},e,n(e.value,e))}if(e.errorOnParent)return r(e);if(e.errorOnChildren){var i=!1;return e.validateSubFields.reduce(function(t,r){var o=Qt({},e[r],n(e[r].value,e[r],!e[r].required,t));return o.showError&&(i=!0),t[r]=o,t},e),Qt({},e,{showError:i})}return Qt({},e,n(e.value,e))}return Qt({},e,n(e.value,e,!0))}return Qt({},e,{showError:!1})},t.prototype.validateForm=function(){var e=this,t=void 0,n=this.state.elements.map(function(n,r){var o=e.validateElement(n);return o.showError&&!t&&(o.focusInvalid=!0,t=!0),e.updateForm(o,{},r,!1,!0),{isInvalid:o.showError,element:o,elementIndex:r}}).filter(function(e){return e.isInvalid});return this.state.validateOnChange||this.setState({validateOnChange:!0}),0===n.length},t.prototype.updateForm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{event:"",isLogicUpdate:!1,isElementUpdate:!1},n=arguments[2],r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a={};if(this.state.validateOnChange&&!t.isLogicUpdate)if(o){var s,c=Qt({},this.state.elements[n][o],e),l=Qt({},this.state.elements[n],(s={},s[o]=c,s));if(this.state.elements[n].errorOnParent||this.state.elements[n].hasExtraFields)a=this.validateElement(l);else{var p;a=Qt({},l,(p={},p[o]=this.validateElement(c),p))}}else a=this.validateElement(Qt({},this.state.elements[n],e));else if(o){var u,d=Qt({},this.state.elements[n][o],e),f=Qt({},this.state.elements[n],(u={},u[o]=d,u));a=f}else a=Qt({},this.state.elements[n],e);t.isElementUpdate&&($t=a.field),this.setState(function(e){var t;return{elements:Qt([].concat(e.elements),(t={},t[n]=Qt({},e.elements[n],a),t))}},function(){r.state.elements[n].normalizedLogic.length&&!i&&r.logic(r.state.elements[n],t.event),r.state.elements[n].setValueCookie&&Object(de.v)("MSanswer."+r.props.formKey+"."+a.id,a.value,r.props.cookieTime);var e=r.state,o=e.activePage,s=e.pageCount,c=e.breakBlocks,l=e.elements,p=e.didLastPageAutoPost,u=e.config;if(!i&&(c[o]&&c[o].autoPost&&!c[o].didAutoPost||s==o&&u.properties.advanced.lastPageAutoPost&&!p)){l.filter(function(e){return e.page==o&&e.isVisible}).pop().field==l[n].field&&(t.isLogicUpdate||(s==o?r.setState({didLastPageAutoPost:!0},function(){-1!==["checkbox","input","textarea","likert","matrix"].indexOf(l[n].type)||l[n].hasExtraFields||r.validateAndPost()}):r.setState(function(e){var t;return{breakBlocks:Qt({},e.breakBlocks,(t={},t[o]=Qt({},e.breakBlocks[o],{didAutoPost:!0}),t))}},function(){-1!==["checkbox","input","textarea","likert","matrix"].indexOf(l[n].type)||l[n].hasExtraFields||r.setPage(!0)})))}})},t.prototype.globalLogic=function(){var e=this,t=this.state,n=t.elements,r=t.config,o={url:function(t){return e.state.pageUrl.indexOf(t)>-1},title:function(e){return document.title.indexOf(e)>-1},url_query:function(t){return Object(de.l)(t,e.state.pageSearch)},cookie:function(e){return Object(de.g)(e)},js:function(e){return Object(de.j)(e)}},i=function(e,t){return"string"==typeof t?e===t:e},a=function(t){var r=t.action,a="show"==r.action,s=i(o[r.source](r.key),r.value);r.targets.forEach(function(t){var o=Object(de.c)(n,function(e){return e.field==t}),i={};-1==o?-1!=(o=Object(de.c)(n,function(e){return e.hasOwnProperty(t.replace("or_last"))}))&&(i=Qt({},n[o]),"prefill"!==r.action?s&&(i[t.replace("or_last")].isVisible=a):s&&(i[t.replace("or_last")].value=s)):(i=Qt({},n[o]),"prefill"!==r.action?i.isVisible=s?a:!a:s&&(i.value=s)),e.updateForm(i,{},o)})},s=r.surveyRules;return Object.keys(s).forEach(function(e){return a(s[e])}),n},t.prototype.logic=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r={"===":function(e,t){return e==t},"!==":function(e,t){return e!=t},"*":function(e,t){return e.indexOf(t)>-1},"!*":function(){return-1==x.indexOf(y)}},o=this.state,i=o.config.blocks,a=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=o.action,s=o.condition;if("object"==typeof a&&"object"==typeof s&&Object(de.o)(s.testValue)){if(["input","keydown","keyup"].indexOf(o.trigger)>-1&&"input"!==n)return;if(["blur","focus"].indexOf(o.trigger)>-1&&"change"!==n)return;var c="show"==a.action,l=r.hasOwnProperty(s.operator)?r[s.operator]:function(){};a.targets.forEach(function(n){var r=Object(de.c)(t.state.elements,function(e){return e.field==n});if(-1!=r||-1!=(r=Object(de.c)(t.state.elements,function(e){return e.hasOwnProperty(n)}))){var o=i[e.id],a=s.testValue.filter(function(t){return e.validateSubFields.length?e.validateSubFields.concat(e.validateExtraFields?e.validateExtraFields:[]).filter(function(n){if(-1==e.field.indexOf("checkbox"))return l(e[n].value,t);var r=e[n].value?o.properties.elements[e[n].key].value:"";return n.indexOf("extra")>-1&&(r=e[n].value?o.properties.elements[Object.keys(o.properties.elements).length].value:""),l(r,t)}).length>0:l(e.value,t)}),p=void 0;p="&&"!==s.concat?a.length?c:!c:a.length==s.testValue.length?c:!c;var u={isVisible:p,fromClickedElement:""};p||(u.value=""),e.field===$t&&(u.fromClickedElement=e.field),(p||e.field===$t||t.state.elements[r].fromClickedElement!==$t)&&t.updateForm(u,{isLogicUpdate:!0},r)}})}};e.normalizedLogic.forEach(function(e){return a(e)})},t.prototype.setPage=function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(n||this.validateForm(!1)||!t)&&this.setState(function(n){var r="number"==typeof t?t:t?n.activePage+1:n.activePage-1;if(r>0&&r<=e.state.pageCount)return{activePage:r,formCompletionPercentage:Math.round((r-1)/e.state.pageCount*100),validateOnChange:!1}},function(){t&&!n&&e.postApi(!1,!0),t||e.track.send("Previous page",{trigger_method:e.props.triggerMethod,form_completion_percentage:e.state.formCompletionPercentage,active_page:e.state.activePage,page_count:e.state.pageCount,form_type:e.form&&e.form._getFormType(),subdomain:e.props.domain,organisation_id:e.state.config.properties.organisation_id,project_id:e.state.config.properties.project_id})})},t.prototype.startSurvey=function(){this.setState({formIsOnOpenerPage:!1})},t.prototype.validateAndPost=function(){var e=this;this.validateForm(!1)&&this.setState({noErrorsOnLastPage:!0,formCompletionPercentage:100},function(){e.postApi(function(){e.setState({formIsCompleted:!0})})})},t.prototype.whichLanguage=function(e){var t=this,n=e.languageTest,r=void 0===n?{}:n,o=Z(e,["languageTest","useTranslation","useToggle"]);return{js_var:function(e){return Object(de.j)(e)},url_location:function(){return Object.keys(o).filter(function(e){return document.location.href.indexOf(e)>-1})[0]},url_query:function(e){return Object(de.l)(e,t.state.pageSearch)},cookie:function(e){return Object(de.g)(e)}}[r.type](r.param)},t.prototype.render=function(e,t){var n=this,r=t.elements,o=t.config,i=t.activePage,a=t.breakBlocks,s=t.formIsCompleted,c=t.formIsOnOpenerPage,l=t.screenshotOnAllPages,p=t.formCompletionPercentage,u=t.pageCount,d=t.isLandingPageSurvey,f=t.isPublicLandingPage,h=t.noErrorsOnLastPage,m=t.renderNull,g=t.forceOpen,y=t.translation,b=t.didLastPageAutoPost,v=this.props,_=v.triggerMethod,O=v.showButton,w=void 0===O||O,j=v.forceType,k=void 0!==j&&j,x=v.webView,S=void 0!==x&&x,C=v.webViewShowHeader,P=void 0!==C&&C,N={config:o,elements:r,blocks:o.blocks,activePage:i,pageCount:u,formCompletionPercentage:p,breakBlocks:a,setPage:function(e,t){n.setPage(e,t)},startSurvey:function(){n.startSurvey()},clearForm:function(){n._clearForm()},updateForm:function(e,t,r,o){n.updateForm(e,Qt(t,{isElementUpdate:!0}),r,o)},state:t,into:t.divName,formIsCompleted:s,formIsOnOpenerPage:c,validateAndPost:function(){n.validateAndPost()},screenshotOnAllPages:l,showButton:w,triggerMethod:_,forceOpen:g,isPublicLandingPage:f,isLandingPageSurvey:d,cookieTime:e.cookieTime||30,ref:function(e){return n.form=e},forceType:k,noErrorsOnLastPage:h,webView:S,webviewShowHeader:P,renderNull:m,translation:y,setLanguage:this.setLanguage,didLastPageAutoPost:b,globalLogic:this.globalLogic,onClose:function(){s&&setTimeout(function(){n.setState(Qt({},n.startState))},300)}};return m?null:Object(ue.h)("div",null,t.configWasLoaded?Object(ue.h)(Wt,N):null)},t}(ue.Component),en=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tn=Object(ue.h)(Lt,null),nn=function(e){function t(){var n,r,o;ie(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=ae(this,e.call.apply(e,[this].concat(a))),r.state={config:{},styles:{},themes:[],formKeys:[]},r.isPreviewPage=document.location.pathname.indexOf("/survey/manage/preview")>-1,r.updateForms=function(){r.props.forms.forEach(function(e){return r.handleUpdate(e)})},r.handleUpdate=function(e){var t=e.formKey;r.state.config[t]||r.updateConfig(t,{},function(){r.loadConfig(e)})},r.updateConfig=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};r.setState(function(n){var r;return en({},n,{config:en({},n.config,(r={},r[e]=en({},n.config[e],t),r))})},function(){oe("__mState",r.state),n()})},r.loadConfig=function(e){var t=e.domain,n=e.formKey,o=e.webView,i=r.state.styles;Oe({domain:t,formKey:n,webView:o}).getConfig(!i.base,r.isPreviewPage).then(function(e){Object(de.o)(e.layout)&&("object"==typeof e.css&&Object.keys(e.css).length>0&&r.setState(function(t){return{styles:en({},t.styles,e.css),themes:[].concat(t.themes,[e.themeClass]),formKeys:[].concat(t.formKeys,[n])}}),r.updateConfig(n,e))})},r.renderForm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=r.state.config,o=function(n,o){var i=o?"portal-"+e.formKey:e.formKey;null!==t?("object"!=typeof r[i]&&(r[i]={}),r[i][t]=n):r[i]=n};return e.divName?Object(ue.h)(he.a,{into:e.divName,key:t?e.formKey+t:e.formKey,ref:function(e){return o(e,!0)}},n[e.formKey]&&Object.keys(n[e.formKey]).length>0&&Object(ue.h)(Zt,en({},e,{ref:function(e){return o(e,!1)},multipleIndex:t,initialConfig:n[e.formKey]}))):null},o=n,ae(r,o)}return se(t,e),t.prototype.getChildContext=function(){var e=this.state;return{styles:e.styles,themes:e.themes,formKeys:e.formKeys}},t.prototype.componentDidMount=function(){var e=this,t=re("__mState");"object"!=typeof t||this.isPreviewPage?this.updateForms():this.setState(en({},t),function(){return e.updateForms()})},t.prototype.componentDidUpdate=function(){this.updateForms()},t.prototype.render=function(e){var t=this;return Object(ue.h)("div",null,Object(ue.h)(he.a,{into:document.head},tn),e.forms.map(function(e){return Object(de.o)(e.divName)?e.divName.map(function(n,r){return t.renderForm(en({},e,{divName:n}),r)}):t.renderForm(e)}))},t}(ue.Component),rn=nn;n("DUkt");var on={version:2,ALL_KEYS:[],managerDiv:null,render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={formKey:e.key,domain:e.domain,forceOpen:e.openForm||["proactive","exit","force"].indexOf(e.trigger_method)>-1,showButton:e.showButton||"passive"===e.trigger_method,cookieTime:e.cookie_expire||30,triggerMethod:e.trigger_method||"",forcePost:e.forcePost||!1,skipToLast:e.skipToLast||!1,forceType:e.forceType||!1,webView:e.webView||!1,webViewShowHeader:e.webViewShowHeader||!1,renderNull:!1,proxyDomain:e.use_collect?"collect.mopinion.com":!!e.proxyDomain&&e.proxyDomain,isCompleted:e.isCompleted||!1,feedbackId:e.feedbackId||null};if(!t.domain&&on.hasOwnProperty(t.formKey)&&on[t.formKey].hasOwnProperty("domain"))t.domain=on[t.formKey].domain;else if(!t.domain)try{t.domain=on[on.ALL_KEYS[0]].domain}catch(e){}if(!t.formKey)throw new Error("formKey required");on.hasOwnProperty(t.formKey)||(on[t.formKey]={},on.ALL_KEYS=[].concat(on.ALL_KEYS,[t.formKey])),!e.hasOwnProperty("showButton")&&on[t.formKey].showButton&&(t.showButton=!0);var n=e.divName?pe(e.divName,e.useQuerySelectorAll):on[t.formKey].divName?on[t.formKey].divName:null;return t.divName=n,t.isMultiple=Object(de.o)(n),on[t.formKey]=t,Yt("Props",t),Yt("Options",e),Yt("Render div",on[t.formKey].renderDiv),this.renderForms()},renderForms:function(){var e=on.ALL_KEYS.map(function(e){return on[e]});on.managerDiv=Object(ue.render)(Object(ue.h)(rn,{forms:e,ref:function(e){return on.manager=e}}),document.body,on.managerDiv)},open:function(){return on.render(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})},loadSurvey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return on.render({key:e.key,domain:e.domain,divName:e.divName,showButton:!1,use_collect:e.use_collect,useQuerySelectorAll:e.useQuerySelectorAll})},openModal:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:on.ALL_KEYS[0];try{on.manager.hasOwnProperty(e)?on.manager[e]._forceOpen():on.open({key:e,domain:on.ALL_KEYS[0].domain,trigger_method:"force"})}catch(e){Yt(e)}},closeModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:on.ALL_KEYS[0];try{on.manager[e]._forceClose()}catch(e){Yt(e)}},send:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{on[t].isMultiple?on[t].divName.forEach(function(n,r){return on.manager[t][r]._forcePost(e)}):on.manager[t]._forcePost(e)}catch(e){Yt(e)}},clearForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{delete on[e],on.ALL_KEYS.splice(on.ALL_KEYS.indexOf(e),1),this.renderForms()}catch(e){Yt(e)}},setPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];try{on[e].isMultiple?on[e].divName.forEach(function(r,o){return on.manager[e][o]._setPage(t,n)}):on.manager[e]._setPage(t,n)}catch(e){Yt(e)}},getFormState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{return on[e].isMultiple?on[e].divName.map(function(t,n){return on.manager[e][n]._getFormState()}):on.manager[e]._getFormState()}catch(e){Yt(e)}},getFormConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{return on[e].isMultiple?on[e].divName.map(function(t,n){return on.manager[e][n]._getFormConfig()}):on.manager[e]._getFormConfig()}catch(e){Yt(e)}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{if(!on[e].isMultiple)return on.manager[e]._setValue(t,n);on[e].divName.forEach(function(r,o){return on.manager[e][o]._setValue(t,n)})}catch(e){Yt(e)}},setBlock:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=arguments[2];try{if(!on[e].isMultiple)return on.manager[e]._setBlock(t,n);on[e].divName.forEach(function(r,o){return on.manager[e][o]._setBlock(t,n)})}catch(e){Yt(e)}},setBlockProperties:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=arguments[2];try{if(!on[e].isMultiple)return on.manager[e]._setBlockProperties(t,n);on[e].divName.forEach(function(r,o){return on.manager[e][o]._setBlockProperties(t,n)})}catch(e){Yt(e)}},setBlockInnerElement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=t.id,r=t.elementKey,o=arguments[2];try{if(!on[e].isMultiple)return on.manager[e]._setBlockInnerElement(n,r,o);on[e].divName.forEach(function(t,i){return on.manager[e][i]._setBlockInnerElement(n,r,o)})}catch(e){Yt(e)}},setProperties:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];try{if(!on[e].isMultiple)return on.manager[e]._setProperties(t);on[e].divName.forEach(function(n,r){return on.manager[e][r]._setProperties(t)})}catch(e){Yt(e)}},setText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];try{if(!on[e].isMultiple)return on.manager[e]._setText(t);on[e].divName.forEach(function(n,r){return on.manager[e][r]._setText(t)})}catch(e){Yt(e)}},setErrors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];try{if(!on[e].isMultiple)return on.manager[e]._setErrors(t);on[e].divName.forEach(function(n,r){return on.manager[e][r]._setErrors(t)})}catch(e){Yt(e)}},setCookie:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=arguments[2];return Object(de.v)(e,t,n)},getCookie:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(de.g)(e)},getUrlParam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(de.l)(e)},getStrParam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.location.href;return Object(de.k)(e,t)},getParameterByName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.location.href;return Object(de.k)(e,t)}};"undefined"!=typeof window&&(window.srv=window.srv||on)},KM04:function(e){!function(){"use strict";function t(e,t){var n,r,o,i,a=F;for(i=arguments.length;i-- >2;)L.push(arguments[i]);for(t&&null!=t.children&&(L.length||L.push(t.children),delete t.children);L.length;)if((r=L.pop())&&void 0!==r.pop)for(i=r.length;i--;)L.push(r[i]);else"boolean"==typeof r&&(r=null),(o="function"!=typeof e)&&(null==r?r="":"number"==typeof r?r+="":"string"!=typeof r&&(o=!1)),o&&n?a[a.length-1]+=r:a===F?a=[r]:a.push(r),n=o;var s=new E;return s.nodeName=e,s.children=a,s.attributes=null==t?void 0:t,s.key=null==t?void 0:t.key,void 0!==T.vnode&&T.vnode(s),s}function n(e,t){for(var n in t)e[n]=t[n];return e}function r(e,t){null!=e&&("function"==typeof e?e(t):e.current=t)}function o(e,r){return t(e.nodeName,n(n({},e.attributes),r),arguments.length>2?[].slice.call(arguments,2):e.children)}function i(e){!e.__d&&(e.__d=!0)&&1==M.push(e)&&(T.debounceRendering||I)(a)}function a(){for(var e;e=M.pop();)e.__d&&k(e)}function s(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&c(e,t.nodeName):n||e._componentConstructor===t.nodeName}function c(e,t){return e.__n===t||e.nodeName.toLowerCase()===t.toLowerCase()}function l(e){var t=n({},e.attributes);t.children=e.children;var r=e.nodeName.defaultProps;if(void 0!==r)for(var o in r)void 0===t[o]&&(t[o]=r[o]);return t}function p(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.__n=e,n}function u(e){var t=e.parentNode;t&&t.removeChild(e)}function d(e,t,n,o,i){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)r(n,null),r(o,e);else if("class"!==t||i)if("style"===t){if(o&&"string"!=typeof o&&"string"!=typeof n||(e.style.cssText=o||""),o&&"object"==typeof o){if("string"!=typeof n)for(var a in n)a in o||(e.style[a]="");for(var a in o)e.style[a]="number"==typeof o[a]&&!1===A.test(a)?o[a]+"px":o[a]}}else if("dangerouslySetInnerHTML"===t)o&&(e.innerHTML=o.__html||"");else if("o"==t[0]&&"n"==t[1]){var s=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),o?n||e.addEventListener(t,f,s):e.removeEventListener(t,f,s),(e.__l||(e.__l={}))[t]=o}else if("list"!==t&&"type"!==t&&!i&&t in e){try{e[t]=null==o?"":o}catch(e){}null!=o&&!1!==o||"spellcheck"==t||e.removeAttribute(t)}else{var c=i&&t!==(t=t.replace(/^xlink:?/,""));null==o||!1===o?c?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof o&&(c?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),o):e.setAttribute(t,o))}else e.className=o||""}function f(e){return this.__l[e.type](T.event&&T.event(e)||e)}function h(){for(var e;e=q.shift();)T.afterMount&&T.afterMount(e),e.componentDidMount&&e.componentDidMount()}function m(e,t,n,r,o,i){D++||(R=null!=o&&void 0!==o.ownerSVGElement,B=null!=e&&!("__preactattr_"in e));var a=g(e,t,n,r,i);return o&&a.parentNode!==o&&o.appendChild(a),--D||(B=!1,i||h()),a}function g(e,t,n,r,o){var i=e,a=R;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||o)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),b(e,!0))),i.__preactattr_=!0,i;var s=t.nodeName;if("function"==typeof s)return x(e,t,n,r);if(R="svg"===s||"foreignObject"!==s&&R,s+="",(!e||!c(e,s))&&(i=p(s,R),e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),b(e,!0)}var l=i.firstChild,u=i.__preactattr_,d=t.children;if(null==u){u=i.__preactattr_={};for(var f=i.attributes,h=f.length;h--;)u[f[h].name]=f[h].value}return!B&&d&&1===d.length&&"string"==typeof d[0]&&null!=l&&void 0!==l.splitText&&null==l.nextSibling?l.nodeValue!=d[0]&&(l.nodeValue=d[0]):(d&&d.length||null!=l)&&y(i,d,n,r,B||null!=u.dangerouslySetInnerHTML),_(i,t.attributes,u),R=a,i}function y(e,t,n,r,o){var i,a,c,l,p,d=e.childNodes,f=[],h={},m=0,y=0,v=d.length,_=0,O=t?t.length:0;if(0!==v)for(var w=0;w<v;w++){var j=d[w],k=j.__preactattr_,x=O&&k?j._component?j._component.__k:k.key:null;null!=x?(m++,h[x]=j):(k||(void 0!==j.splitText?!o||j.nodeValue.trim():o))&&(f[_++]=j)}if(0!==O)for(var w=0;w<O;w++){l=t[w],p=null;var x=l.key;if(null!=x)m&&void 0!==h[x]&&(p=h[x],h[x]=void 0,m--);else if(y<_)for(i=y;i<_;i++)if(void 0!==f[i]&&s(a=f[i],l,o)){p=a,f[i]=void 0,i===_-1&&_--,i===y&&y++;break}p=g(p,l,n,r),c=d[w],p&&p!==e&&p!==c&&(null==c?e.appendChild(p):p===c.nextSibling?u(c):e.insertBefore(p,c))}if(m)for(var w in h)void 0!==h[w]&&b(h[w],!1);for(;y<=_;)void 0!==(p=f[_--])&&b(p,!1)}function b(e,t){var n=e._component;n?S(n):(null!=e.__preactattr_&&r(e.__preactattr_.ref,null),!1!==t&&null!=e.__preactattr_||u(e),v(e))}function v(e){for(e=e.lastChild;e;){var t=e.previousSibling;b(e,!0),e=t}}function _(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||d(e,r,n[r],n[r]=void 0,R);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||d(e,r,n[r],n[r]=t[r],R)}function O(e,t,n){var r,o=K.length;for(e.prototype&&e.prototype.render?(r=new e(t,n),C.call(r,t,n)):(r=new C(t,n),r.constructor=e,r.render=w);o--;)if(K[o].constructor===e)return r.__b=K[o].__b,K.splice(o,1),r;return r}function w(e,t,n){return this.constructor(e,n)}function j(e,t,n,o,a){e.__x||(e.__x=!0,e.__r=t.ref,e.__k=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||a?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,o)),o&&o!==e.context&&(e.__c||(e.__c=e.context),e.context=o),e.__p||(e.__p=e.props),e.props=t,e.__x=!1,0!==n&&(1!==n&&!1===T.syncComponentUpdates&&e.base?i(e):k(e,1,a)),r(e.__r,e))}function k(e,t,r,o){if(!e.__x){var i,a,s,c=e.props,p=e.state,u=e.context,d=e.__p||c,f=e.__s||p,g=e.__c||u,y=e.base,v=e.__b,_=y||v,w=e._component,x=!1,C=g;if(e.constructor.getDerivedStateFromProps&&(p=n(n({},p),e.constructor.getDerivedStateFromProps(c,p)),e.state=p),y&&(e.props=d,e.state=f,e.context=g,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(c,p,u)?x=!0:e.componentWillUpdate&&e.componentWillUpdate(c,p,u),e.props=c,e.state=p,e.context=u),e.__p=e.__s=e.__c=e.__b=null,e.__d=!1,!x){i=e.render(c,p,u),e.getChildContext&&(u=n(n({},u),e.getChildContext())),y&&e.getSnapshotBeforeUpdate&&(C=e.getSnapshotBeforeUpdate(d,f));var P,N,E=i&&i.nodeName;if("function"==typeof E){var L=l(i);a=w,a&&a.constructor===E&&L.key==a.__k?j(a,L,1,u,!1):(P=a,e._component=a=O(E,L,u),a.__b=a.__b||v,a.__u=e,j(a,L,0,u,!1),k(a,1,r,!0)),N=a.base}else s=_,P=w,P&&(s=e._component=null),(_||1===t)&&(s&&(s._component=null),N=m(s,i,u,r||!y,_&&_.parentNode,!0));if(_&&N!==_&&a!==w){var F=_.parentNode;F&&N!==F&&(F.replaceChild(N,_),P||(_._component=null,b(_,!1)))}if(P&&S(P),e.base=N,N&&!o){for(var I=e,A=e;A=A.__u;)(I=A).base=N;N._component=I,N._componentConstructor=I.constructor}}for(!y||r?q.push(e):x||(e.componentDidUpdate&&e.componentDidUpdate(d,f,C),T.afterUpdate&&T.afterUpdate(e));e.__h.length;)e.__h.pop().call(e);D||o||h()}}function x(e,t,n,r){for(var o=e&&e._component,i=o,a=e,s=o&&e._componentConstructor===t.nodeName,c=s,p=l(t);o&&!c&&(o=o.__u);)c=o.constructor===t.nodeName;return o&&c&&(!r||o._component)?(j(o,p,3,n,r),e=o.base):(i&&!s&&(S(i),e=a=null),o=O(t.nodeName,p,n),e&&!o.__b&&(o.__b=e,a=null),j(o,p,1,n,r),e=o.base,a&&e!==a&&(a._component=null,b(a,!1))),e}function S(e){T.beforeUnmount&&T.beforeUnmount(e);var t=e.base;e.__x=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?S(n):t&&(null!=t.__preactattr_&&r(t.__preactattr_.ref,null),e.__b=t,u(t),K.push(e),v(t)),r(e.__r,null)}function C(e,t){this.__d=!0,this.context=t,this.props=e,this.state=this.state||{},this.__h=[]}function P(e,t,n){return m(n,e,{},!1,t,!1)}function N(){return{}}var E=function(){},T={},L=[],F=[],I="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,A=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,M=[],q=[],D=0,R=!1,B=!1,K=[];n(C.prototype,{setState:function(e,t){this.__s||(this.__s=this.state),this.state=n(n({},this.state),"function"==typeof e?e(this.state,this.props):e),t&&this.__h.push(t),i(this)},forceUpdate:function(e){e&&this.__h.push(e),k(this,2)},render:function(){}});var U={h:t,createElement:t,cloneElement:o,createRef:N,Component:C,render:P,rerender:a,options:T};e.exports=U}()},MNpE:function(e){!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e){return!!e&&"object"==typeof e}function t(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||n(e)}function n(e){return e.$$typeof===f}function r(e){return Array.isArray(e)?[]:{}}function o(e,t){return!1!==t.clone&&t.isMergeableObject(e)?p(r(e),e,t):e}function i(e,t,n){return e.concat(t).map(function(e){return o(e,n)})}function a(e,t){if(!t.customMerge)return p;var n=t.customMerge(e);return"function"==typeof n?n:p}function s(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return e.propertyIsEnumerable(t)}):[]}function c(e){return Object.keys(e).concat(s(e))}function l(e,t,n){var r={};return n.isMergeableObject(e)&&c(e).forEach(function(t){r[t]=o(e[t],n)}),c(t).forEach(function(i){r[i]=n.isMergeableObject(t[i])&&e[i]?a(i,n)(e[i],t[i],n):o(t[i],n)}),r}function p(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||i,n.isMergeableObject=n.isMergeableObject||u;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):l(e,t,n):o(t,n)}var u=function(n){return e(n)&&!t(n)},d="function"==typeof Symbol&&Symbol.for,f=d?Symbol.for("react.element"):60103;return p.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,n){return p(e,n,t)},{})},p})},UQex:function(e){"use strict";function t(e){return function(){return e}}var n=function(){};n.thatReturns=t,n.thatReturnsFalse=t(!1),n.thatReturnsTrue=t(!0),n.thatReturnsNull=t(null),n.thatReturnsThis=function(){return this},n.thatReturnsArgument=function(e){return e},e.exports=n},fkUE:function(module,__webpack_exports__,__webpack_require__){"use strict";function rnd(){return Math.random().toString(36)}function shuffleArray(e){return e.map(function(e){return{sort:Math.random(),value:e}}).sort(function(e,t){return e.sort-t.sort}).map(function(e){return e.value})}function orderObj(e,t){return e.reduce(function(e,n,r){return e[String(r+1)]=t[n],e},{})}function shallowEqual(e,t){for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}function createRandomId(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:35,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:36,n="",r=void 0;n.length<e;)r=Math.random().toString(t).slice(2),n+=r.slice(0,Math.min(r.length,e-n.length));return n}function stripTags(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return String(e).replace(/(<([^>]+)>)/gi,"")}function getWebViewMetaData(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&"object"==typeof window.metaData?Object.keys(window.metaData).map(function(e){return{label:e,value:window.metaData[e],type:"category"}}):[]}function getFeedbackIdFromImportId(e){var t=e.split(".");return t[1]?t[1]:t[0]}function get(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").split(".").reduce(function(e,n){return e&&e[n]?e[n]:t},e)}function startsWith(e,t){return t.substr(0,e.length)===e}function getImageUri(e){return startsWith("data:image",e)?e:"https://cacheorcheck.mopinion.com/survey/public/image?file="+e}function getJsFromString(str){try{if(str.indexOf("[*]")>-1){var _str$split=str.split("[*]"),arr=_str$split[0],key=_str$split[1],foundStr="";return window[arr].some(function(o,i){var arrStr=arr+"["+i+"]"+key,test=eval(arrStr);return test&&(foundStr=arrStr),test}),eval(foundStr)}return eval(str)}catch(e){return""}}__webpack_require__.d(__webpack_exports__,"l",function(){return getUrlParam}),__webpack_require__.d(__webpack_exports__,"k",function(){return getStrParam}),__webpack_require__.d(__webpack_exports__,"g",function(){return getCookie}),__webpack_require__.d(__webpack_exports__,"v",function(){return setCookie}),__webpack_require__.d(__webpack_exports__,"b",function(){return appendScript}),__webpack_require__.d(__webpack_exports__,"z",function(){return throttle}),__webpack_require__.d(__webpack_exports__,"a",function(){return addClass}),__webpack_require__.d(__webpack_exports__,"t",function(){return removeClass}),__webpack_require__.d(__webpack_exports__,"n",function(){return hasClass}),__webpack_require__.d(__webpack_exports__,"p",function(){return loadFonts}),__webpack_require__.d(__webpack_exports__,"c",function(){return arrayFindIndex}),__webpack_require__.d(__webpack_exports__,"A",function(){return triggerEvent}),__webpack_require__.d(__webpack_exports__,"e",function(){return encodeQuotes}),__webpack_require__.d(__webpack_exports__,"s",function(){return prependChild}),__webpack_require__.d(__webpack_exports__,"o",function(){return isArray}),__webpack_require__.d(__webpack_exports__,"q",function(){return nodeListToArray}),__webpack_exports__.u=rnd,__webpack_exports__.x=shuffleArray,__webpack_exports__.r=orderObj,__webpack_exports__.w=shallowEqual,__webpack_exports__.d=createRandomId,__webpack_exports__.y=stripTags,__webpack_exports__.m=getWebViewMetaData,__webpack_exports__.h=getFeedbackIdFromImportId,__webpack_exports__.f=get,__webpack_exports__.i=getImageUri,__webpack_exports__.j=getJsFromString;var getUrlParam=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.search;e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=n.exec(t);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},getStrParam=function(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=n.exec(t);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},getCookie=function(e){for(var t=document.cookie.split("; "),n=Array.isArray(t),r=0,t=n?t:t[Symbol.iterator]();;){var o;if(n){if(r>=t.length)break;o=t[r++]}else{if(r=t.next(),r.done)break;o=r.value}var i=o,a=i.split("="),s=a[0],c=a[1];if(e===s)return decodeURIComponent(c)}},setCookie=function(e,t,n){var r="";if(n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),r="; expires="+o.toUTCString()}document.cookie=e+"="+(t||"")+r+"; path=/"},appendStyle=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=arguments[2],r="srv-"+e.split("/").pop().replace(".css",""),o=t.getElementsByTagName("head")[0];if(t.getElementById(r))return void("function"==typeof n&&n());var i=t.createElement("link");i.type="text/css",i.rel="stylesheet",i.id=r,i.href=e,"function"==typeof n&&(i.onload=n),o.appendChild(i)},appendScript=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.doc,r=void 0===n?document:n,o=t.text,i=void 0===o?"":o,a=t.onLoad,s=e?"srv-"+e.split("/").pop().replace(".js",""):"",c=r.getElementsByTagName("head")[0];if(!r.getElementById(s)){var l=r.createElement("script");if(l.type="text/javascript",l.id=s,i?l.textContent=i:l.src=e,c.appendChild(l),"function"==typeof a){var p=!1;l.onload=l.onreadystatechange=function(){if(!(p||l.readyState&&"loaded"!==l.readyState&&"complete"!==l.readyState)){p=!0;try{a()}catch(e){}}}}}},debounce=function(e,t){var n=void 0;return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];n&&clearTimeout(n),n=setTimeout(function(){e.apply(void 0,o),n=null},t)}},throttle=function(e,t){var n=0;return function(){var r=(new Date).getTime();if(!(r-n<t))return n=r,e.apply(void 0,arguments)}},addClass=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.classList?r.classList.add(t):r.className+=" "+t}},removeClass=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.classList?r.classList.remove(t):r.className=r.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}},hasClass=function(e,t){return e.classList?e.classList.contains(t):new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)},loadFonts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;"string"==typeof e&&(e=[].concat(e));var n=e.filter(function(e){return e&&!isFontLoaded(e,t)});return n.length&&appendStyle("https://fonts.mopinion.com/css?family="+n.map(function(e){return e.replace(/ /g,"+")}).join("|"),t),n},isFontLoaded=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(t.fonts&&"function"==typeof t.fonts.check&&window.chrome)return t.fonts.check("12px "+e);var n=t.createElement("span");n.innerHTML="giItT1WQy@!-/#",n.style.position="absolute",n.style.left="-10000px",n.style.top="-10000px",n.style.fontSize="300px",n.style.fontFamily="sans-serif",n.style.fontVariant="normal",n.style.fontStyle="normal",n.style.fontWeight="normal",n.style.letterSpacing="0",t.body.appendChild(n);var r=n.offsetWidth;n.style.fontFamily=e+", sans-serif";var o=n.offsetWidth!==r;return n.parentNode.removeChild(n),o},objectToFormData=function e(t,n,r){if(n instanceof Object)return Object.keys(n).forEach(function(o){var i=n[o];if(i instanceof Object&&!isArray(i))return e(t,i,o);r&&(o=r+"["+o+"]"),isArray(i)?i.forEach(function(n,r){return e(t,n,o+"["+r+"]")}):t.append(o,i)}),t},serialize=function e(t,n){var r,o=[];for(r in t)if(t.hasOwnProperty(r)){var i=n?n+"["+r+"]":r,a=t[r];o.push(null!==a&&"object"==typeof a?e(a,i):encodeURIComponent(i)+"="+encodeURIComponent(a))}return o.join("&")},arrayFindIndex=function(e,t,n){if("function"==typeof Array.prototype.findIndex)return e.findIndex(t,n);if("function"!=typeof t)throw new TypeError("predicate must be a function");var r=Object(e),o=r.length;if(0===o)return-1;for(var i=0;i<o;i++)if(t.call(n,r[i],i,r))return i;return-1},triggerEvent=function(e){var t=e.element||document;if("function"==typeof CustomEvent){t.dispatchEvent(new CustomEvent("mopinion_"+e.event,{bubbles:!1,detail:e}))}else{var n=document.createEvent("CustomEvent");n.initCustomEvent("mopinion_"+e.event,!1,!1,e),t.dispatchEvent(n)}},encodeQuotes=function(e){var t={'"':"&quot;","'":"&#039;"};return e.replace(/["']/g,function(e){return t[e]})},prependChild=function(e,t){return e.insertBefore(t,e.firstChild)},isArray=function(e){return Array.isArray?Array.isArray(e):e instanceof Array},nodeListToArray=function(e){return Array.prototype.slice.call(e)}},q6qL:function(e,t,n){!function(t,r){e.exports=r(n("KM04"))}(0,function(e){"use strict";var t=(function(){function e(e){this.value=e}function t(t){function n(e,t){return new Promise(function(n,o){var s={key:e,arg:t,resolve:n,reject:o,next:null};a?a=a.next=s:(i=a=s,r(e,t))})}function r(n,i){try{var a=t[n](i),s=a.value;s instanceof e?Promise.resolve(s.value).then(function(e){r("next",e)},function(e){r("throw",e)}):o(a.done?"return":"normal",a.value)}catch(e){o("throw",e)}}function o(e,t){switch(e){case"return":i.resolve({value:t,done:!0});break;case"throw":i.reject(t);break;default:i.resolve({value:t,done:!1})}i=i.next,i?r(i.key,i.arg):a=null}var i,a;this._invoke=n,"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}),n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},r=function(r){function i(){return n(this,r.apply(this,arguments))}return t(i,r),i.prototype.componentDidUpdate=function(e){for(var t in e)if(e[t]!==this.props[t])return setTimeout(this.renderLayer)},i.prototype.componentDidMount=function(){this.isMounted=!0,(this.renderLayer=this.renderLayer.bind(this))()},i.prototype.componentWillUnmount=function(){this.renderLayer(!1),this.isMounted=!1,this.remote&&this.remote.parentNode.removeChild(this.remote)},i.prototype.findNode=function(e){return"string"==typeof e?document.querySelector(e):e},i.prototype.renderLayer=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isMounted&&(this.props.into!==this.intoPointer&&(this.intoPointer=this.props.into,this.into&&this.remote&&(this.remote=e.render(e.h(o,null),this.into,this.remote)),this.into=this.findNode(this.props.into)),this.remote=e.render(e.h(o,{context:this.context},t&&this.props.children||null),this.into,this.remote))},i.prototype.render=function(){return null},i}(e.Component),o=function(e){function r(){return n(this,e.apply(this,arguments))}return t(r,e),r.prototype.getChildContext=function(){return this.props.context},r.prototype.render=function(e){var t=e.children;return t&&t[0]||null},r}(e.Component);return r})},vSUH:function(e,t,n){"use strict";var r=n("KM04"),o=function(e){return e&&e.default?e.default:e};if("function"==typeof o(n("JkW7"))){var i=document.body.firstElementChild,a=function(){var e=o(n("JkW7"));i=(0,r.render)((0,r.h)(e),document.body,i)};a()}},"wRU+":function(e){"use strict";function t(e,t,r,o,i,a,s,c){if(n(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[r,o,i,a,s,c],u=0;l=new Error(t.replace(/%s/g,function(){return p[u++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var n=function(){};e.exports=t},wVGV:function(e,t,n){"use strict";var r=n("UQex");n("wRU+"),n("Asjh");e.exports=function(){function e(){}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},zXdP:function(e){e.exports={check:{viewBox:"0 0 28 28",path:"M26.109 8.844c0 0.391-0.156 0.781-0.438 1.062l-13.438 13.438c-0.281 0.281-0.672 0.438-1.062 0.438s-0.781-0.156-1.062-0.438l-7.781-7.781c-0.281-0.281-0.438-0.672-0.438-1.062s0.156-0.781 0.438-1.062l2.125-2.125c0.281-0.281 0.672-0.438 1.062-0.438s0.781 0.156 1.062 0.438l4.594 4.609 10.25-10.266c0.281-0.281 0.672-0.438 1.062-0.438s0.781 0.156 1.062 0.438l2.125 2.125c0.281 0.281 0.438 0.672 0.438 1.062z"},"angle-right":{viewBox:"0 0 9 28",path:"M9.297 15c0 0.125-0.063 0.266-0.156 0.359l-7.281 7.281c-0.094 0.094-0.234 0.156-0.359 0.156s-0.266-0.063-0.359-0.156l-0.781-0.781c-0.094-0.094-0.156-0.219-0.156-0.359 0-0.125 0.063-0.266 0.156-0.359l6.141-6.141-6.141-6.141c-0.094-0.094-0.156-0.234-0.156-0.359s0.063-0.266 0.156-0.359l0.781-0.781c0.094-0.094 0.234-0.156 0.359-0.156s0.266 0.063 0.359 0.156l7.281 7.281c0.094 0.094 0.156 0.234 0.156 0.359z"},"angle-left":{viewBox:"0 0 11 28",path:"M9.797 8.5c0 0.125-0.063 0.266-0.156 0.359l-6.141 6.141 6.141 6.141c0.094 0.094 0.156 0.234 0.156 0.359s-0.063 0.266-0.156 0.359l-0.781 0.781c-0.094 0.094-0.234 0.156-0.359 0.156s-0.266-0.063-0.359-0.156l-7.281-7.281c-0.094-0.094-0.156-0.234-0.156-0.359s0.063-0.266 0.156-0.359l7.281-7.281c0.094-0.094 0.234-0.156 0.359-0.156s0.266 0.063 0.359 0.156l0.781 0.781c0.094 0.094 0.156 0.219 0.156 0.359z"},"paper-plane-o":{viewBox:"0 0 28 28",path:"M27.563 0.172c0.328 0.234 0.484 0.609 0.422 1l-4 24c-0.047 0.297-0.234 0.547-0.5 0.703-0.141 0.078-0.313 0.125-0.484 0.125-0.125 0-0.25-0.031-0.375-0.078l-8.234-3.359-4.656 5.109c-0.187 0.219-0.453 0.328-0.734 0.328-0.125 0-0.25-0.016-0.359-0.063-0.391-0.156-0.641-0.531-0.641-0.938v-7.063l-7.375-3.016c-0.359-0.141-0.594-0.469-0.625-0.859-0.031-0.375 0.172-0.734 0.5-0.922l26-15c0.328-0.203 0.75-0.187 1.062 0.031zM22.219 23.594l3.453-20.672-22.406 12.922 5.25 2.141 13.484-9.984-7.469 12.453z"},"commenting-o":{viewBox:"0 0 28 28",path:"M10 14c0 1.109-0.891 2-2 2s-2-0.891-2-2 0.891-2 2-2 2 0.891 2 2zM16 14c0 1.109-0.891 2-2 2s-2-0.891-2-2 0.891-2 2-2 2 0.891 2 2zM22 14c0 1.109-0.891 2-2 2s-2-0.891-2-2 0.891-2 2-2 2 0.891 2 2zM14 6c-6.5 0-12 3.656-12 8 0 2.328 1.563 4.547 4.266 6.078l1.359 0.781-0.422 1.5c-0.297 1.109-0.688 1.969-1.094 2.688 1.578-0.656 3.016-1.547 4.297-2.672l0.672-0.594 0.891 0.094c0.672 0.078 1.359 0.125 2.031 0.125 6.5 0 12-3.656 12-8s-5.5-8-12-8zM28 14c0 5.531-6.266 10-14 10-0.766 0-1.531-0.047-2.266-0.125-2.047 1.813-4.484 3.094-7.187 3.781-0.562 0.156-1.172 0.266-1.781 0.344h-0.078c-0.313 0-0.594-0.25-0.672-0.594v-0.016c-0.078-0.391 0.187-0.625 0.422-0.906 0.984-1.109 2.109-2.047 2.844-4.656-3.219-1.828-5.281-4.656-5.281-7.828 0-5.516 6.266-10 14-10v0c7.734 0 14 4.484 14 10z"},star:{viewBox:"0 0 26 28",path:"M26 10.109c0 0.281-0.203 0.547-0.406 0.75l-5.672 5.531 1.344 7.812c0.016 0.109 0.016 0.203 0.016 0.313 0 0.406-0.187 0.781-0.641 0.781-0.219 0-0.438-0.078-0.625-0.187l-7.016-3.687-7.016 3.687c-0.203 0.109-0.406 0.187-0.625 0.187-0.453 0-0.656-0.375-0.656-0.781 0-0.109 0.016-0.203 0.031-0.313l1.344-7.812-5.688-5.531c-0.187-0.203-0.391-0.469-0.391-0.75 0-0.469 0.484-0.656 0.875-0.719l7.844-1.141 3.516-7.109c0.141-0.297 0.406-0.641 0.766-0.641s0.625 0.344 0.766 0.641l3.516 7.109 7.844 1.141c0.375 0.063 0.875 0.25 0.875 0.719z"},refresh:{viewBox:"0 0 24 28",path:"M23.609 16.5c0 0.031 0 0.078-0.016 0.109-1.328 5.531-5.891 9.391-11.656 9.391-3.047 0-6-1.203-8.219-3.313l-2.016 2.016c-0.187 0.187-0.438 0.297-0.703 0.297-0.547 0-1-0.453-1-1v-7c0-0.547 0.453-1 1-1h7c0.547 0 1 0.453 1 1 0 0.266-0.109 0.516-0.297 0.703l-2.141 2.141c1.469 1.375 3.422 2.156 5.437 2.156 2.781 0 5.359-1.437 6.813-3.813 0.375-0.609 0.562-1.203 0.828-1.828 0.078-0.219 0.234-0.359 0.469-0.359h3c0.281 0 0.5 0.234 0.5 0.5zM24 4v7c0 0.547-0.453 1-1 1h-7c-0.547 0-1-0.453-1-1 0-0.266 0.109-0.516 0.297-0.703l2.156-2.156c-1.484-1.375-3.437-2.141-5.453-2.141-2.781 0-5.359 1.437-6.813 3.813-0.375 0.609-0.562 1.203-0.828 1.828-0.078 0.219-0.234 0.359-0.469 0.359h-3.109c-0.281 0-0.5-0.234-0.5-0.5v-0.109c1.344-5.547 5.953-9.391 11.719-9.391 3.063 0 6.047 1.219 8.266 3.313l2.031-2.016c0.187-0.187 0.438-0.297 0.703-0.297 0.547 0 1 0.453 1 1z"},camera:{viewBox:"0 0 30 28",path:"M15 10.5c2.484 0 4.5 2.016 4.5 4.5s-2.016 4.5-4.5 4.5-4.5-2.016-4.5-4.5 2.016-4.5 4.5-4.5zM26 4c2.203 0 4 1.797 4 4v14c0 2.203-1.797 4-4 4h-22c-2.203 0-4-1.797-4-4v-14c0-2.203 1.797-4 4-4h3.5l0.797-2.125c0.391-1.031 1.609-1.875 2.703-1.875h8c1.094 0 2.312 0.844 2.703 1.875l0.797 2.125h3.5zM15 22c3.859 0 7-3.141 7-7s-3.141-7-7-7-7 3.141-7 7 3.141 7 7 7z"}}}});
//# sourceMappingURL=survey.min.bundle.js.map